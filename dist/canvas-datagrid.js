!function(e){function t(o){if(r[o])return r[o].exports;var l=r[o]={i:o,l:!1,exports:{}};return e[o].call(l.exports,l,l.exports,t),l.l=!0,l.exports}var r={};t.m=e,t.c=r,t.d=function(e,r,o){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,r){var o,l;o=[r(1),r(2),r(3),r(4),r(5),r(6),r(7)],void 0!==(l=function(){"use strict";function e(r){r=r||{};var o={};return o.args=r,o.createGrid=e,o.orders={rows:[],columns:[]},o.hasFocus=!1,o.activeCell={columnIndex:0,rowIndex:0},o.storageName="canvasDataGrid",o.invalidSearchExpClass="canvas-datagrid-invalid-search-regExp",o.uniqueId="_canvasDataGridUniqueId",o.orderBy=o.uniqueId,o.orderDirection="asc",o.columnFilters={},o.filters={},o.ellipsisCache={},o.scrollBox={},o.visibleRows=[],o.sizes={rows:{},columns:{},trees:{}},o.currentFilter=function(){return!0},o.selections=[],o.hovers={},o.attributes={},o.style={},o.intf={},o.formatters={},o.sorters={},o.schemaHashes={},o.events={},o.uId=0,o.changes=[],o.scrollIndexTop=0,o.scrollPixelTop=0,o.scrollIndexLeft=0,o.scrollPixelLeft=0,o.childGrids={},o.openChildren={},o.scrollModes=["vertical-scroll-box","vertical-scroll-top","vertical-scroll-bottom","horizontal-scroll-box","horizontal-scroll-right","horizontal-scroll-left"],o.mouse={x:0,y:0},o.getSelectedData=function(e){var t=[],r=o.getSchema(),l=o.data.length;return o.selections.forEach(function(n,i){i!==l&&(t[i]={},e?r.forEach(function(e){t[i][e.name]=o.data[i][e.name]}):n.forEach(function(e){-1!==e&&(t[i][r[e].name]=o.data[i][r[e].name])}))}),t},o.scrollOffset=function(e){for(var t=0,r=0;e.parentNode;)"canvas-datagrid-tree"!==e.nodeType&&"canvas-datagrid-cell"!==e.nodeType&&(t-=e.scrollLeft,r-=e.scrollTop),e=e.parentNode;return{left:t,top:r}},o.position=function(e,t){for(var r,l,n=0,i=0,s=e;e.offsetParent;)n+=e.offsetLeft,i+=e.offsetTop,r=e.offsetHeight,l=e.offsetWidth,e=e.offsetParent;return t?{left:n,top:i,height:r,width:l}:(e=s,s=o.scrollOffset(e),{left:n+s.left,top:i+s.top,height:r,width:l})},o.getLayerPos=function(e){var t=o.canvas.getBoundingClientRect(),r={x:e.clientX-t.left,y:e.clientY-t.top};return o.isChildGrid&&(r.x-=o.canvasOffsetLeft,r.y-=o.canvasOffsetTop),{x:r.x,y:r.y}},o.fillArray=function(e,t,r){r=r||1;var o,l=[];for(o=e;o<=t;o+=r)l[o]=o;return l},o.getHeaderCellHeight=function(){return o.sizes.rows[-1]||o.style.headerCellHeight},o.getHeaderCellWidth=function(){return o.attributes.showRowHeaders?o.sizes.columns.cornerCell||o.style.headerRowWidth:0},o.setStorageData=function(){o.attributes.saveAppearance&&localStorage.setItem(o.storageName+"-"+o.attributes.name,JSON.stringify({sizes:{rows:o.sizes.rows,columns:o.sizes.columns},orders:{rows:o.orders.rows,columns:o.orders.columns},orderBy:o.orderBy,orderDirection:o.orderDirection}))},o.getSchema=function(){return o.schema||o.tempSchema},o.createColumnOrders=function(){var e=o.getSchema();o.orders.columns=o.fillArray(0,e.length-1)},o.createRowOrders=function(){o.orders.rows=o.fillArray(0,o.data.length-1)},o.getVisibleSchema=function(){return o.getSchema().filter(function(e){return!e.hidden})},o.createNewRowData=function(){o.newRow={},o.newRow[o.uniqueId]=o.uId,o.uId+=1,o.getSchema().forEach(function(e,t){var r=e.defaultValue||"";"function"==typeof r&&(r=r.apply(o.intf,[e,t])),o.newRow[e.name]=r})},o.addEllipsis=function(e,t){var r,l,n=o.style.cellPaddingRight+o.style.cellPaddingLeft;if(o.ellipsisCache[e]&&o.ellipsisCache[e][t])return o.ellipsisCache[e][t];if(o.ctx.measureText(e).width+n<t)r=e;else for(r=e.substring(0,1),l=1;t>o.ctx.measureText(r).width+n;)l+=1,r=e.substring(0,l)+"...";return o.ellipsisCache[e]=o.ellipsisCache[e]||{},o.ellipsisCache[e][t]=r,r},o.getSchemaNameHash=function(e){for(var t=0;o.schemaHashes[e];)t+=1,e+=t;return e},o.filter=function(e){var t=o.filters[e];return t||void 0===e||(console.warn("Cannot find filter for type %s, falling back to substring match.",e),t=o.filters.string),t},o.getBestGuessDataType=function(e){var t,r,l=o.data.length;for(r=0;r<l;r+=1)if(-1!==[null,void 0].indexOf(o.data[r][e]))return t=typeof o.data[r],"object"===t?"string":t;return"string"},o.drawChildGrids=function(){Object.keys(o.childGrids).forEach(function(e){o.childGrids[e].draw()})},o.resizeChildGrids=function(){Object.keys(o.childGrids).forEach(function(e){o.childGrids[e].resize()})},o.getClippingRect=function(e){var t=o.position(o.parentNode),r=o.position(e),l={x:0,y:0,h:0,w:0},n={x:-1/0,y:-1/0,h:1/0,w:1/0},i=o.getHeaderCellHeight(),s=o.getHeaderCellWidth();return l.h=t.top+t.height-e.offsetTop-o.style.scrollBarWidth,l.w=t.left+t.width-e.offsetLeft-o.style.scrollBarWidth,l.x=t.left+-1*r.left+s,l.y=t.top+-1*r.top+i,{x:l.x>n.x?l.x:n.x,y:l.y>n.y?l.y:n.y,h:l.h<n.h?l.h:n.h,w:l.w<n.w?l.w:n.w}},o.clipElement=function(e){var t=o.getClippingRect(e);t.w<0&&(t.w=0),t.h<0&&(t.h=0),e.style.clip="rect("+t.y+"px,"+t.w+"px,"+t.h+"px,"+t.x+"px)"},o.autoScrollZone=function(e,t,r,l){var n,i=o.getHeaderCellWidth(),s=o.getHeaderCellHeight();t>o.width-o.attributes.selectionScrollZone&&t<o.width&&(o.scrollBox.scrollLeft+=o.attributes.selectionScrollIncrement,n=!0),r>o.height-o.attributes.selectionScrollZone&&r<o.height&&(o.scrollBox.scrollTop+=o.attributes.selectionScrollIncrement,n=!0),t-o.attributes.selectionScrollZone-i<0&&(o.scrollBox.scrollLeft-=o.attributes.selectionScrollIncrement,n=!0),r-o.attributes.selectionScrollZone-s<0&&(o.scrollBox.scrollTop-=o.attributes.selectionScrollIncrement,n=!0),n&&!l&&o.currentCell&&-1!==o.currentCell.columnIndex&&(o.scrollTimer=setTimeout(o.mousemove,o.attributes.scrollRepeatRate,e))},o.refreshFromOrigialData=function(){o.data=o.originalData.filter(function(e){return!0})},o.validateColumn=function(e,t){if(!e.name)throw new Error("A column must contain at least a name.");if(t.filter(function(t){return t.name===e.name}).length>0)throw new Error("A column with the name "+e.name+" already exists and cannot be added again.");return!0},o.setDefaults=function(e,t,r,o){e[r]=void 0===t[r]?o:t[r]},o.setAttributes=function(){o.defaults.attributes.forEach(function(e){o.setDefaults(o.attributes,r,e[0],e[1])})},o.setStyle=function(){o.defaults.styles.forEach(function(e){o.setDefaults(o.style,r.style||{},e[0],e[1])})},o.autosize=function(e){o.getVisibleSchema().forEach(function(t){t.name!==e&&void 0!==e||o.fitColumnToValues(t.name)}),o.fitColumnToValues("cornerCell")},o.dispose=function(){!o.isChildGrid&&o.canvas&&o.canvas.parentNode&&o.canvas.parentNode.removeChild(o.canvas),o.eventParent.removeEventListener("mouseup",o.mouseup,!1),o.eventParent.removeEventListener("mousedown",o.mousedown,!1),o.eventParent.removeEventListener("dblclick",o.dblclick,!1),o.eventParent.removeEventListener("click",o.click,!1),o.eventParent.removeEventListener("mousemove",o.mousemove),o.eventParent.removeEventListener("mousewheel",o.scrollWheel,!1),o.canvas.removeEventListener("contextmenu",o.contextmenu,!1),o.canvas.removeEventListener("copy",o.copy),o.controlInput.removeEventListener("keypress",o.keypress,!1),o.controlInput.removeEventListener("keyup",o.keyup,!1),o.controlInput.removeEventListener("keydown",o.keydown,!1),window.removeEventListener("resize",o.resize),o.observer&&o.observer.disconnect&&o.observer.disconnect()},o.tryLoadStoredOrders=function(){var e;o.storedSettings&&"object"==typeof o.storedSettings.orders&&(o.storedSettings.orders.rows.length>=o.data.length&&(o.orders.rows=o.storedSettings.orders.rows),e=o.getSchema(),o.orders.columns=o.storedSettings.orders.columns,e.forEach(function(e,t){-1===o.orders.columns.indexOf(t)&&o.orders.columns.push(t)}),o.orderBy=void 0===o.storedSettings.orderBy?o.uniqueId:o.storedSettings.orderBy,o.orderDirection=void 0===o.storedSettings.orderDirection?o.uniqueId:o.storedSettings.orderDirection,o.getHeaderByName(o.orderBy)&&o.orderDirection&&o.order(o.orderBy,o.orderDirection))},o.init=function(){if(o.setAttributes(),o.setStyle(),o.initScrollBox(),o.setDom(),o.intf.type="canvas-datagrid",o.intf.addEventListener=o.addEventListener,o.intf.removeEventListener=o.removeEventListener,o.intf.dispatchEvent=o.dispatchEvent,o.intf.dispose=o.dispose,o.intf.appendTo=o.appendTo,o.intf.filters=o.filters,o.intf.sorters=o.sorters,o.intf.autosize=o.autosize,o.intf.beginEditAt=o.beginEditAt,o.intf.endEdit=o.endEdit,o.intf.setActiveCell=o.setActiveCell,o.intf.scrollIntoView=o.scrollIntoView,o.intf.clearChangeLog=o.clearChangeLog,o.intf.gotoCell=o.gotoCell,o.intf.gotoRow=o.gotoRow,o.intf.findColumnScrollLeft=o.findColumnScrollLeft,o.intf.findRowScrollTop=o.findRowScrollTop,o.intf.fitColumnToValues=o.fitColumnToValues,o.intf.findColumnMaxTextLength=o.findColumnMaxTextLength,o.intf.disposeContextMenu=o.disposeContextMenu,o.intf.getCellAt=o.getCellAt,o.intf.isCellVisible=o.isCellVisible,o.intf.order=o.order,o.intf.draw=o.draw,o.intf.selectArea=o.selectArea,o.intf.clipElement=o.clipElement,o.intf.getSchemaFromData=o.getSchemaFromData,o.intf.setFilter=o.setFilter,o.intf.selectRow=o.selectRow,o.intf.parentGrid=o.parentGrid,o.intf.toggleTree=o.toggleTree,o.intf.expandTree=o.expandTree,o.intf.collapseTree=o.collapseTree,o.intf.canvas=o.canvas,o.intf.context=o.ctx,o.intf.insertRow=o.insertRow,o.intf.deleteRow=o.deleteRow,o.intf.addRow=o.addRow,o.intf.insertColumn=o.insertColumn,o.intf.deleteColumn=o.deleteColumn,o.intf.addColumn=o.addColumn,o.intf.getClippingRect=o.getClippingRect,o.intf.setRowHeight=o.setRowHeight,o.intf.setColumnWidth=o.setColumnWidth,o.intf.resetColumnWidths=o.resetColumnWidths,o.intf.resetRowHeights=o.resetRowHeights,o.intf.resize=o.resize,o.intf.drawChildGrids=o.drawChildGrids,Object.keys(o.style).forEach(function(e){Object.defineProperty(o.intf.style,e,{get:function(){return o.style[e]},set:function(t){o.style[e]=t,o.draw(!0)}})}),Object.keys(o.attributes).forEach(function(e){Object.defineProperty(o.intf.attributes,e,{get:function(){return o.attributes[e]},set:function(t){o.attributes[e]=t,o.draw(!0)}})}),o.filters.string=function(e,t){if(!t)return!0;var r;o.invalidFilterRegEx=void 0;try{r=new RegExp(t,"ig")}catch(e){return void(o.invalidFilterRegEx=e)}return r.test(e)},o.filters.number=function(e,t){return!t||e===t},o.attributes.name&&o.attributes.saveAppearance){if(o.storedSettings=localStorage.getItem(o.storageName+"-"+o.attributes.name),o.storedSettings)try{o.storedSettings=JSON.parse(o.storedSettings)}catch(e){console.warn("could not read settings from localStore",e),o.storedSettings=void 0}o.storedSettings&&"object"==typeof o.storedSettings.sizes&&(o.sizes.rows=o.storedSettings.sizes.rows,o.sizes.columns=o.storedSettings.sizes.columns,["trees","columns","rows"].forEach(function(e){o.sizes[e]||(o.sizes[e]={})}))}r.data&&(o.intf.data=r.data),r.schema&&(o.intf.schema=r.schema),o.data||(o.intf.data=[]),o.resize(!0)},t.forEach(function(e){e(o)}),o.init(),o.intf}var t=Array.prototype.slice.call(arguments);return window&&!window.canvasDatagrid&&(window.canvasDatagrid=e),e}.apply(t,o))&&(e.exports=l)},function(e,t,r){var o,l;o=[],void 0!==(l=function(){"use strict";return function(e){function t(t,r){return t+=e.canvasOffsetLeft,r+=e.canvasOffsetTop,e.ctx.fillStyle=e.style.headerOrderByArrowColor,e.ctx.strokeStyle=e.style.headerOrderByArrowBorderColor,e.ctx.beginPath(),t+=e.style.headerOrderByArrowMarginLeft,r+=e.style.headerOrderByArrowMarginTop,"asc"===e.orderDirection?(e.ctx.moveTo(t,r),e.ctx.lineTo(t+e.style.headerOrderByArrowWidth,r),e.ctx.lineTo(t+.5*e.style.headerOrderByArrowWidth,r+e.style.headerOrderByArrowHeight),e.ctx.moveTo(t,r)):(e.ctx.lineTo(t,r+e.style.headerOrderByArrowHeight),e.ctx.lineTo(t+e.style.headerOrderByArrowWidth,r+e.style.headerOrderByArrowHeight),e.ctx.lineTo(t+.5*e.style.headerOrderByArrowWidth,r),e.ctx.lineTo(t,r+e.style.headerOrderByArrowHeight)),e.ctx.stroke(),e.ctx.fill(),e.style.headerOrderByArrowMarginLeft+e.style.headerOrderByArrowWidth+e.style.headerOrderByArrowMarginRight}function r(t,r,o){return r+=e.canvasOffsetLeft,o+=e.canvasOffsetTop,e.ctx.fillStyle=e.style.treeArrowColor,e.ctx.strokeStyle=e.style.treeArrowBorderColor,e.ctx.beginPath(),r+=e.style.treeArrowMarginLeft,o+=e.style.treeArrowMarginTop,e.openChildren[t.data[e.uniqueId]]?(e.ctx.moveTo(r,o),e.ctx.lineTo(r+e.style.treeArrowWidth,o),e.ctx.lineTo(r+.5*e.style.treeArrowWidth,o+e.style.treeArrowHeight),e.ctx.moveTo(r,o)):(e.ctx.lineTo(r,o),e.ctx.lineTo(r+e.style.treeArrowHeight,o+.5*e.style.treeArrowWidth),e.ctx.lineTo(r,o+e.style.treeArrowWidth),e.ctx.lineTo(r,o)),e.ctx.stroke(),e.ctx.fill(),e.style.treeArrowMarginLeft+e.style.treeArrowWidth+e.style.treeArrowMarginRight}function o(t,r,o,l,n){t+=e.canvasOffsetLeft,r+=e.canvasOffsetTop;var i=t+o,s=r+l;e.ctx.beginPath(),e.ctx.moveTo(t+n,r),e.ctx.lineTo(i-n,r),e.ctx.quadraticCurveTo(i,r,i,r+n),e.ctx.lineTo(i,r+l-n),e.ctx.quadraticCurveTo(i,s,i-n,s),e.ctx.lineTo(t+n,s),e.ctx.quadraticCurveTo(t,s,t,s-n),e.ctx.lineTo(t,r+n),e.ctx.quadraticCurveTo(t,r,t+n,r)}function l(t,r,o,l){t+=e.canvasOffsetLeft,r+=e.canvasOffsetTop,e.ctx.fillRect(t,r,o,l)}function n(t,r,o,l){t+=e.canvasOffsetLeft,r+=e.canvasOffsetTop,e.ctx.strokeRect(t,r,o,l)}function i(t,r,o){r+=e.canvasOffsetLeft,o+=e.canvasOffsetTop,e.ctx.fillText(t,r,o)}function s(t,r){e.ctx.beginPath(),{t:function(){e.ctx.moveTo(t.x+e.canvasOffsetLeft,t.y+e.canvasOffsetTop),e.ctx.lineTo(t.x+e.canvasOffsetLeft+t.width,t.y+e.canvasOffsetTop)},r:function(){e.ctx.moveTo(t.x+e.canvasOffsetLeft+t.width,t.y+e.canvasOffsetTop),e.ctx.lineTo(t.x+e.canvasOffsetLeft+t.width,t.y+e.canvasOffsetTop+t.height)},b:function(){e.ctx.moveTo(t.x+e.canvasOffsetLeft,t.y+e.canvasOffsetTop+t.height),e.ctx.lineTo(t.x+e.canvasOffsetLeft+t.width,t.y+e.canvasOffsetTop+t.height)},l:function(){e.ctx.moveTo(t.x+e.canvasOffsetLeft,t.y+e.canvasOffsetTop),e.ctx.lineTo(t.x+e.canvasOffsetLeft,t.y+e.canvasOffsetTop+t.height)}}[r](),e.ctx.stroke()}e.draw=function(a){function d(a,d,c){return function(u,g,x){var m,C,I,S=u.style||"cell",T=e.selections[c]&&-1!==e.selections[c].indexOf(x),z=e.hovers[a[e.uniqueId]]&&-1!==e.hovers[a[e.uniqueId]].indexOf(x),R=e.activeCell.rowIndex===c&&e.activeCell.columnIndex===x,H=Array.isArray(a[u.name]),k=!(e.orders.rows[e.activeCell.rowIndex]!==c&&e.orders.columns[e.activeCell.columnIndex]!==x||-1!==x&&-1!==c),W=e.formatters[u.type||"string"],A=0,j=0,D=e.sizes.columns["rowHeaderCell"===S?"cornerCell":u[e.uniqueId]]||u.width;if("headerCellCap"===S&&(D=O-B),void 0===D&&(D=e.style.columnWidth),B+D+h<0&&(B+=D+h),R&&(S="activeCell"),-1===e.visibleRows.indexOf(d)&&-1===["headerCell","cornerCell"].indexOf(S)&&e.visibleRows.push(d),I=e.dispatchEvent("formatcellvalue",[e.ctx,a[u.name],a,u,p,y],e.intf),!e.dispatchEvent("beforerendercell",[{},e.ctx,a[u.name],a,u,p,y],e.intf))return p=B,y=b,"cornerCell"===S?(p=0,y=0):"rowHeaderCell"===S?p=0:"headerCell"===S&&(y=0),C={type:H?"canvas-datagrid-cell":u.type,style:S,nodeType:"canvas-datagrid-cell",x:p,y:y,offsetTop:e.canvasOffsetTop,offsetLeft:e.canvasOffsetLeft,scrollTop:e.scrollBox.scrollTop,scrollLeft:e.scrollBox.scrollLeft,active:!0===R,hovered:!0===z,selected:!0===T,width:D,height:P,offsetWidth:D,offsetHeight:P,parentNode:e.intf.parentNode,offsetParent:e.intf.parentNode,data:a,isHeader:/headerCell|cornerCell/.test(S),isRowHeader:"rowHeaderCell"===S,rowOpen:v,header:u,columnIndex:x,rowIndex:c,sortColumnIndex:g,sortRowIndex:d,isGrid:H,gridId:(e.attributes.name||"")+a[e.uniqueId]+":"+u[e.uniqueId],parentGrid:e.intf,value:"headerCell"===S?u.title||u.name:a[u.name]},C.userHeight=C.isHeader?e.sizes.rows[-1]:w,C.userWidth=C.isHeader?e.sizes.columns.cornerCell:e.sizes.columns[u[e.uniqueId]],C[e.uniqueId]=a[e.uniqueId],e.visibleCells.unshift(C),e.ctx.fillStyle=e.style[S+"BackgroundColor"],e.ctx.strokeStyle=e.style[S+"BorderColor"],e.ctx.lineWidth=e.style[S+"BorderWidth"],z&&(e.ctx.fillStyle=e.style[S+"HoverBackgroundColor"],e.ctx.strokeStyle=e.style[S+"HoverBorderColor"]),T&&(e.ctx.fillStyle=e.style[S+"SelectedBackgroundColor"],e.ctx.strokeStyle=e.style[S+"SelectedBorderColor"]),k&&(e.ctx.fillStyle=e.style[S+"ActiveBackgroundColor"]),e.dispatchEvent("rendercell",[e.ctx,C],e.intf),C.isGrid&&(C.height!==w&&(C.height=w||e.style.cellHeightWithChildGrid,f=!0),C.width=e.sizes.columns[u[e.uniqueId]]||e.style.cellWidthWithChildGrid),v&&!C.isRowHeader&&(C.height=e.sizes.rows[L[e.uniqueId]]||e.style.cellHeight),C.isGrid||(l(p,y,C.width,C.height),n(p,y,C.width,C.height)),e.ctx.save(),o(C.x,C.y,C.width,C.height,0),e.ctx.clip(),e.dispatchEvent("afterrendercell",[e.ctx,C],e.intf),C.height===P||v&&!C.isRowHeader||(e.sizes.rows["headerCell"===S?-1:a[e.uniqueId]]=C.height,f=!0),C.width!==D&&(e.sizes.columns[u[e.uniqueId]]=C.width,f=!0),"rowHeaderCell"===S&&e.attributes.tree&&(e.dispatchEvent("rendertreearrow",[{},e.ctx,C],e.intf)||(j=r(C,e.style[S+"PaddingLeft"],y,0))),(e.attributes.showRowNumbers&&"rowHeaderCell"===S||"rowHeaderCell"!==S)&&(C.isGrid?(e.childGrids[C.gridId]||(m=e.args.childGridAttributes||e.args,m.name=e.attributes.saveAppearance?C.gridId:void 0,m.parentNode=C,m.data=a[u.name],e.childGrids[C.gridId]=e.createGrid(m),e.dispatchEvent("rendercellgrid",[e.ctx,C,e.childGrids[C.gridId]],e.intf),f=!0),C.grid=e.childGrids[C.gridId],C.grid.parentNode=C,C.grid.visible=!0,C.grid.draw()):(e.childGrids[C.gridId]&&(e.childGrids[C.gridId].parentNode.offsetHeight=0),e.ctx.font=e.style[S+"Font"],I=void 0!==I?I:W?W(e.ctx,C):"",void 0!==I||W||(I="",console.warn("canvas-datagrid: I don't know how to format a "+u.type+" add a cellFormater")),"headerCell"===S&&e.orderBy===u.name&&(e.dispatchEvent("renderorderbyarrow",[{},e.ctx,C],e.intf)||(A=t(p+e.style[S+"PaddingLeft"],0))),e.ctx.fillStyle=e.style[S+"Color"],z&&(e.ctx.fillStyle=e.style[S+"HoverColor"]),T&&(e.ctx.fillStyle=e.style[S+"SelectedColor"]),k&&(e.ctx.fillStyle=e.style[S+"ActiveColor"]),e.columnFilters&&void 0!==e.columnFilters[I]&&"headerCell"===S&&(I=e.style.filterTextPrefix+I),C.formattedValue=(void 0!==I&&null!==I?I:"").toString(),e.dispatchEvent("rendertext",[e.ctx,C],e.intf),i(e.addEllipsis(C.formattedValue,C.width-e.style[S+"PaddingRight"]-A-e.style.autosizePadding),j+A+p+e.style[S+"PaddingLeft"],y-.5*C.height+e.style[S+"PaddingTop"]+C.height))),R&&!e.attributes.rowSelectionMode&&(E=C,e.ctx.lineWidth=e.style.activeCellOverlayBorderWidth,e.ctx.strokeStyle=e.style.activeCellOverlayBorderColor,n(E.x,E.y,E.width,E.height)),T&&(e.ctx.lineWidth=e.style.selectionOverlayBorderWidth,e.ctx.strokeStyle=e.style.selectionOverlayBorderColor,C.selected&&"rowHeaderCell"!==C.style&&(e.selections[C.rowIndex-1]&&-1!==e.selections[C.rowIndex-1].indexOf(C.columnIndex)&&0!==C.rowIndex||C.isHeader||s(C,"t"),e.selections[C.rowIndex]&&C.columnIndex!==M.length-1&&-1!==e.selections[C.rowIndex].indexOf(C.columnIndex+1)||s(C,"r"),e.selections[C.rowIndex+1]&&-1!==e.selections[C.rowIndex+1].indexOf(C.columnIndex)||s(C,"b"),e.selections[C.rowIndex]&&0!==C.columnIndex&&-1!==e.selections[C.rowIndex].indexOf(C.columnIndex-1)||s(C,"l"))),e.ctx.restore(),B+=C.width+h,C.width}}function c(t,r,o){var l;e.attributes.showRowHeaders&&(B=0,g={rowHeaderCell:r+1},g[e.uniqueId]=t[e.uniqueId],l={name:"rowHeaderCell",width:e.style.headerRowWidth,style:"rowHeaderCell",type:"string",data:t[e.uniqueId],index:-1},l[e.uniqueId]=t[e.uniqueId],d(g,r,o)(l,-1,-1))}function u(t,r){var o,l,i,s,a=M.length;if(b-2*P>S)return!1;if(L=e.data[t],v=e.openChildren[L[e.uniqueId]],i=e.sizes.rows[L[e.uniqueId]]||e.style.cellHeight,l=v?e.sizes.trees[L[e.uniqueId]]:0,w=i+l,b<-1*w)return!1;for(e.attributes.showRowHeaders&&(B+=k),P=w,s=e.scrollIndexLeft;s<a&&(o=e.orders.columns[s],!((B+=d(L,t,r)(M[o],o,s))>e.width));s+=1);return c(L,t,r),P=w,B=-1*e.scrollBox.scrollLeft+e.scrollPixelLeft,m=e.childGrids[L[e.uniqueId]],t!==e.data.length&&v?(m.visible=!0,m.parentNode={offsetTop:b+i+e.canvasOffsetTop,offsetLeft:B+k-1+e.canvasOffsetLeft,offsetHeight:l,offsetWidth:e.width-k-e.style.scrollBarWidth-1,offsetParent:e.intf.parentNode,parentNode:e.intf.parentNode,style:e.style,nodeType:"canvas-datagrid-tree",scrollTop:e.scrollBox.scrollTop,scrollLeft:e.scrollBox.scrollLeft,rowIndex:t},e.visibleCells.unshift({rowIndex:B,columnIndex:0,y:m.parentNode.offsetTop,x:m.parentNode.offsetLeft,height:m.parentNode.offsetHeight,width:m.parentNode.offsetWidth,style:"tree-grid",type:m.parentNode.nodeType}),m.draw()):m&&(m.parentNode.offsetHeight=0,delete e.sizes.trees[L[e.uniqueId]]),e.attributes.rowSelectionMode&&e.activeCell&&e.activeCell.rowIndex===t&&(e.ctx.lineWidth=e.style.activeCellOverlayBorderWidth,e.ctx.strokeStyle=e.style.activeCellOverlayBorderColor,n(0,b,e.getHeaderWidth(),w)),b+=P+h,!0}if(e.isChildGrid||e.height&&e.width){if(e.isChildGrid&&a)return void requestAnimationFrame(e.parentGrid.draw);if(!1!==e.intf.visible){var f,h,g,x,p,y,m,v,w,C,b,B,I,S,O,M,T,L,E,z=e.data.length,R=e.currentCell||{},H=e.getHeaderCellHeight(),k=e.getHeaderCellWidth(),P=e.style.cellHeight;e.data.length>e.orders.rows.length&&e.createRowOrders(),e.ctx.save(),function(){e.attributes.showPerformance&&(x=performance.now()),h=2*e.style.cellBorderWidth,e.visibleRows=[],M=e.getVisibleSchema(),e.visibleCells=[],e.canvasOffsetTop=e.isChildGrid?e.parentNode.offsetTop:0,e.canvasOffsetLeft=e.isChildGrid?e.parentNode.offsetLeft:0,S=e.height,O=e.width,e.isChildGrid||e.ctx.scale(window.devicePixelRatio,window.devicePixelRatio)}(),function(){o(0,0,O,S,0),e.ctx.clip(),e.ctx.fillStyle=e.style.backgroundColor,l(0,0,O,S)}(),function(){var t,r,o,l=M.length;for(B=-1*e.scrollBox.scrollLeft+e.scrollPixelLeft,b=-1*e.scrollBox.scrollTop+H+e.scrollPixelTop,T=e.scrollIndexTop;T<z&&(r=e.orders.rows[T],u(r,T));T+=1);if(e.attributes.showNewRow){for(e.attributes.showRowHeaders&&(B+=k),w=P=e.style.cellHeight,v=!1,t=e.scrollIndexLeft;t<l&&(o=e.orders.columns[t],!((B+=d(e.newRow,e.data.length,e.data.length)(M[o],o,t))>e.width+e.scrollBox.scrollLeft));t+=1);c(e.newRow,e.data.length,e.data.length)}}(),function(){var t,r,o,l,n,i=M.length;if(e.attributes.showHeaders){for(B=-1*e.scrollBox.scrollLeft+e.scrollPixelLeft,e.attributes.showRowHeaders&&(B+=k),b=0,P=e.getHeaderCellHeight(),o=e.scrollIndexLeft;o<i&&(r=e.orders.columns[o],n=M[r],t={title:n.title,name:n.name,width:n.width,style:"headerCell",type:"string",index:o,order:r},l={headerCell:n.title||n.name},l[e.uniqueId]="h"+n[e.uniqueId],t[e.uniqueId]=n[e.uniqueId],!((B+=d(l,-1,-1)(t,o,r))>e.width+e.scrollBox.scrollLeft));o+=1);B<O&&(I={name:"",width:e.style.scrollBarWidth,style:"headerCellCap",type:"string",index:M.length},I[e.uniqueId]="headerCell",d({endCap:""},-1,-1)(I,-1,-1)),e.attributes.showRowHeaders&&(C={cornerCell:""},C[e.uniqueId]="cornerCell",B=0,I={name:"cornerCell",width:e.style.headerRowWidth,style:"cornerCell",type:"string",index:-1},I[e.uniqueId]="cornerCell",d(C,-1,-1)(I,-1,-1))}}(),function(){if(e.reorderObject){var t={height:e.reorderObject.height,width:e.reorderObject.width,x:e.reorderObject.x+e.reorderObject.dragOffset.x,y:e.reorderObject.y+e.reorderObject.dragOffset.y},r={width:O,heigth:S,x:0,y:0};e.ctx.fillStyle=e.style.reorderMarkerBackgroundColor,e.ctx.lineWidth=e.style.reorderMarkerBorderWidth,e.ctx.strokeStyle=e.style.reorderMarkerBorderColor,"row-reorder"===e.dragMode?(t.width=O,t.x=0,r.width=O,r.y=e.currentCell.y,l(t.x,t.y,t.width,t.height),n(t.x,t.y,t.width,t.height),e.ctx.lineWidth=e.style.reorderMarkerIndexBorderWidth,e.ctx.strokeStyle=e.style.reorderMarkerIndexBorderColor,e.currentCell.rowIndex!==e.reorderObject.rowIndex&&e.currentCell.rowIndex-1!==e.reorderObject.rowIndex&&s(r,"t")):"column-reorder"===e.dragMode&&e.reorderObject&&(t.height=S,t.y=0,r.height=S,r.x=e.currentCell.x,l(t.x,t.y,t.width,t.height),n(t.x,t.y,t.width,t.height),e.ctx.lineWidth=e.style.reorderMarkerIndexBorderWidth,e.ctx.strokeStyle=e.style.reorderMarkerIndexBorderColor,e.currentCell.columnIndex!==e.reorderObject.columnIndex&&e.currentCell.columnIndex-1!==e.reorderObject.columnIndex&&s(r,"l"))}}(),function(){var t={x:0,y:0,height:0,width:0,style:"vertical-scroll-bar"},r={x:0,y:0,height:0,width:0,style:"horizontal-scroll-bar"},i={x:0,y:0,height:0,width:0,style:"vertical-scroll-box"},s={x:0,y:0,height:0,width:0,style:"horizontal-scroll-box"},a={x:0,y:0,height:0,width:0,style:"scroll-box-corner"},d=2*e.style.scrollBarBoxMargin,c=.5*e.style.scrollBarBoxMargin;e.ctx.strokeStyle=e.style.scrollBarBorderColor,e.ctx.lineWidth=e.style.scrollBarBorderWidth,t.x+=O-e.style.scrollBarWidth-e.style.scrollBarBorderWidth-c,t.y+=H,t.width=e.style.scrollBarWidth+e.style.scrollBarBorderWidth+c,t.height=S-H-e.style.scrollBarWidth-c-d,e.ctx.fillStyle=e.style.scrollBarBackgroundColor,l(t.x,t.y,t.width,t.height+d),n(t.x,t.y,t.width,t.height+d),i.x=t.x+e.style.scrollBarBoxMargin,i.y=H+e.style.scrollBarBoxMargin+(t.height-e.scrollBox.scrollBoxHeight)*(e.scrollBox.scrollTop/e.scrollBox.scrollHeight),i.width=e.style.scrollBarBoxWidth,i.height=e.scrollBox.scrollBoxHeight,e.ctx.fillStyle=e.style.scrollBarBoxColor,/vertical/.test(R.context)&&(e.ctx.fillStyle=e.style.scrollBarActiveColor),i.width<t.width&&(o(i.x,i.y,i.width,i.height,e.style.scrollBarBoxBorderRadius),e.ctx.stroke(),e.ctx.fill()),r.x+=k,r.y+=S-e.style.scrollBarWidth-c,r.width=O-e.style.scrollBarWidth-k-c-d,r.height=e.style.scrollBarWidth+e.style.scrollBarBorderWidth+c,e.ctx.fillStyle=e.style.scrollBarBackgroundColor,l(r.x,r.y,r.width+d,r.height),n(r.x,r.y,r.width+d,r.height),s.y=r.y+e.style.scrollBarBoxMargin,s.x=k+e.style.scrollBarBoxMargin+(r.width-e.scrollBox.scrollBoxWidth)*(e.scrollBox.scrollLeft/e.scrollBox.scrollWidth),s.width=e.scrollBox.scrollBoxWidth,s.height=e.style.scrollBarBoxWidth,e.ctx.fillStyle=e.style.scrollBarBoxColor,/horizontal/.test(R.context)&&(e.ctx.fillStyle=e.style.scrollBarActiveColor),s.width<r.width&&(o(s.x,s.y,s.width,s.height,e.style.scrollBarBoxBorderRadius),e.ctx.stroke(),e.ctx.fill()),e.ctx.strokeStyle=e.style.scrollBarCornerBorderColor,e.ctx.fillStyle=e.style.scrollBarCornerBackground,a.x=r.x+r.width+d,a.y=t.y+t.height+d,a.width=e.style.scrollBarWidth+e.style.scrollBarBorderWidth,a.height=e.style.scrollBarWidth+e.style.scrollBarBorderWidth,o(a.x,a.y,a.width,a.height,0),e.ctx.stroke(),e.ctx.fill(),e.visibleCells.unshift(t),e.visibleCells.unshift(i),e.visibleCells.unshift(r),e.visibleCells.unshift(s),e.visibleCells.unshift(a),e.scrollBox.bar={v:t,h:r},e.scrollBox.box={v:i,h:s}}(),f&&e.resize(!0),function(){e.ctx.lineWidth=e.style.gridBorderWidth,e.ctx.strokeStyle=e.style.gridBorderColor,n(0,0,e.width,e.height)}(),function(){e.attributes.showPerformance&&(e.ctx.fillStyle="black",x=(performance.now()-x).toFixed(2)+"ms",e.ctx.font="23px sans-serif",i(x,O-O/5,S-S/10)),e.attributes.debug&&(e.ctx.font="14px sans-serif",x="scrollLeft: %s, scrollTop: %s, topIndex: %s, topPixel: %s, leftIndex: %s, leftPixel: %s,\noffsetLeft: %s, offsetTop: %s, w: %s, h: %s, x: %s, y: %s,\nvisible entities: %s, focus: %s, dragMode: %s\ncontext: %s".replace("%s",e.scrollBox.scrollLeft).replace("%s",e.scrollBox.scrollTop).replace("%s",e.scrollIndexTop).replace("%s",e.scrollPixelTop).replace("%s",e.scrollIndexLeft).replace("%s",e.scrollPixelLeft).replace("%s",e.canvasOffsetLeft).replace("%s",e.canvasOffsetTop).replace("%s",e.width).replace("%s",e.height).replace("%s",e.mouse.x).replace("%s",e.mouse.y).replace("%s",e.visibleCells.length).replace("%s",e.hasFocus).replace("%s",e.dragMode).replace("%s",e.currentCell?"(x: %s, y: %s, ox: %s, oy: %s, context: %s, dragContext: %s, style: %s, type: %s)".replace("%s",e.currentCell.columnIndex).replace("%s",e.currentCell.rowIndex).replace("%s",e.currentCell.sortColumnIndex).replace("%s",e.currentCell.sortRowIndex).replace("%s",e.currentCell.context).replace("%s",e.currentCell.dragContext).replace("%s",e.currentCell.style).replace("%s",e.currentCell.type):""),x.split("\n").forEach(function(t,r){e.ctx.fillStyle="rgba(255, 255, 255, 0.8)",l(70,39+15*r,e.ctx.measureText(t).width+20,15),e.ctx.fillStyle="rgba(0, 0, 0, 1)",i(t,80,52+15*r)}))}(),e.ctx.restore()}}}}}.apply(t,o))&&(e.exports=l)},function(e,t,r){var o,l;o=[],void 0!==(l=function(){"use strict";return function(e){e.stopPropagation=function(e){e.stopPropagation()},e.addEventListener=function(t,r){e.events[t]=e.events[t]||[],e.events[t].unshift(r)},e.removeEventListener=function(t,r){(e.events[t]||[]).forEach(function(o,l){r===o&&e.events[t].splice(l,1)})},e.dispatchEvent=function(t,r,o){function l(){n=!0}r=r||{},o=o||e.intf;var n;if(e.events[t])return e.events[t].forEach(function(e){r[0].preventDefault=l,e.apply(o,r)}),n},e.resize=function(t){var r,o,l=2*e.style.cellBorderWidth,n=2*e.style.headerCellBorderWidth,i=e.getHeaderCellHeight(),s=e.getHeaderCellWidth();return e.isChildGrid?(e.height=e.parentNode.offsetHeight,e.width=e.parentNode.offsetWidth):(e.height=e.parentDOMNode.offsetHeight-e.style.scrollBarBoxMargin,e.width=e.parentDOMNode.offsetWidth-e.style.scrollBarBoxMargin,e.parentNode=e.parentDOMNode,e.canvas.height=e.height*window.devicePixelRatio,e.canvas.width=e.width*window.devicePixelRatio,e.canvas.style.height=e.height+"px",e.canvas.style.width=e.width+"px",e.canvasOffsetTop=0,e.canvasOffsetLeft=0),r=e.data.reduce(function(t,r){return t+(e.sizes.rows[r[e.uniqueId]]||e.style.cellHeight)+(e.sizes.trees[r[e.uniqueId]]||0)+l},0)||0,o=e.getVisibleSchema().reduce(function(t,r){return r.hidden?t:t+(e.sizes.columns[r[e.uniqueId]]||r.width||e.style.columnWidth)+l},0)||0,e.attributes.showNewRow&&(r+=e.style.cellHeight+l),e.scrollBox.width=e.width-s,e.scrollBox.height=e.height-i-n,e.scrollBox.top=i+n,e.scrollBox.left=s,e.scrollBox.scrollHeight=r+e.style.scrollBarWidth-e.scrollBox.height,e.scrollBox.scrollWidth=o+e.style.scrollBarWidth-e.scrollBox.width,e.scrollBox.widthBoxRatio=(e.scrollBox.width-15)/(e.scrollBox.scrollWidth+e.scrollBox.width-15),e.scrollBox.scrollBoxWidth=e.scrollBox.width*e.scrollBox.widthBoxRatio-e.style.scrollBarWidth,e.scrollBox.heightBoxRatio=(e.scrollBox.height-30)/(e.scrollBox.scrollHeight+(e.scrollBox.height-30)),e.scrollBox.scrollBoxHeight=e.scrollBox.height*e.scrollBox.heightBoxRatio-e.style.scrollBarWidth,e.scrollBox.scrollBoxWidth=Math.max(e.scrollBox.scrollBoxWidth,e.style.scrollBarBoxMinSize),e.scrollBox.scrollBoxHeight=Math.max(e.scrollBox.scrollBoxHeight,e.style.scrollBarBoxMinSize),e.page=e.visibleRows.length-3-e.attributes.pageUpDownOverlap,t&&e.draw(!0),e.dispatchEvent("resize",[{}],e.intf),!0},e.scroll=function(t){var r,o=e.getVisibleSchema(),l=2*e.style.cellBorderWidth;for(e.scrollIndexTop=0,e.scrollPixelTop=0,e.scrollIndexLeft=0,e.scrollPixelLeft=0;e.scrollPixelTop<e.scrollBox.scrollTop&&e.scrollIndexTop<e.data.length;)e.scrollPixelTop+=(e.sizes.rows[e.data[e.scrollIndexTop][e.uniqueId]]||e.style.cellHeight)+(e.sizes.trees[e.data[e.scrollIndexTop][e.uniqueId]]||0)+l,e.scrollIndexTop+=1;for(;e.scrollPixelLeft<e.scrollBox.scrollLeft&&e.scrollIndexLeft<o.length;)e.scrollPixelLeft+=e.sizes.columns[o[e.scrollIndexLeft][e.uniqueId]]||o[e.scrollIndexLeft].width,e.scrollIndexLeft+=1;e.data.length>0&&(e.scrollIndexLeft=Math.max(e.scrollIndexLeft-1,0),e.scrollPixelLeft=Math.max(e.scrollPixelLeft-(e.sizes.columns[o[e.scrollIndexLeft][e.uniqueId]]||o[e.scrollIndexLeft].width),0),e.scrollIndexTop=Math.max(e.scrollIndexTop-1,0),e.scrollPixelTop=Math.max(e.scrollPixelTop-(e.sizes.rows[e.data[e.scrollIndexTop][e.uniqueId]]||e.style.cellHeight)-(e.sizes.trees[e.data[e.scrollIndexTop][e.uniqueId]]||0),0)),e.ellipsisCache={},e.draw(!0),e.input&&(r=e.position(e.parentNode,!0),e.input.style.top=r.top+e.scrollEdit.inputTop+(e.scrollEdit.scrollTop-e.scrollBox.scrollTop)+"px",e.input.style.left=r.left+e.scrollEdit.inputLeft+(e.scrollEdit.scrollLeft-e.scrollBox.scrollLeft)+"px",e.clipElement(e.input)),e.dispatchEvent("scroll",[{top:e.scrollBox.scrollTop,left:e.scrollBox.scrollLeft}],e.intf)},e.mousemove=function(t){if(!e.contextMenu&&!e.input){e.mouse=e.getLayerPos(t);var r,o,l,n,i,s=t.controlKey||t.metaKey||e.attributes.persistantSelectionMode,a=e.getSchema(),d=e.mouse.x,c=e.mouse.y;if(clearTimeout(e.scrollTimer),!e.dispatchEvent("mousemove",[t,n],e.intf)&&(e.isInGrid({x:d,y:c})||(e.hasFocus=!1),n=e.getCellAt(d,c),n&&e.currentCell&&(e.currentCell.rowIndex!==n.rowIndex||e.currentCell.columnIndex!==n.columnIndex)&&(e.cellBoundaryCrossed=!0,e.dispatchEvent("cellmouseover",[t,n],e.intf),e.dispatchEvent("cellmouseout",[t,e.currentCell],e.intf)),e.currentCell=n,e.hasFocus)){if(e.hovers={},!e.draggingItem&&n&&-1===e.scrollModes.indexOf(n.context)&&(e.dragItem=n,e.dragMode=n.dragContext,e.canvas.style.cursor=n.context,"cell"===n.context&&n.data&&(e.canvas.style.cursor="pointer",e.hovers[n.data[e.uniqueId]]=[n.rowIndex]),(e.selecting||e.reorderObject)&&"cell"===n.context&&n.data)){if(l=e.getSelectionBounds(),i={x:Math.abs(e.dragStart.x-d),y:Math.abs(e.dragStart.y-c)},-1!==e.dragStartObject.columnIndex&&t.shiftKey&&(e.dragStartObject={rowIndex:e.activeCell.rowIndex,columnIndex:e.activeCell.columnIndex}),o={top:Math.min(e.dragStartObject.rowIndex,n.rowIndex),left:Math.min(e.dragStartObject.columnIndex,n.columnIndex),bottom:Math.max(e.dragStartObject.rowIndex,n.rowIndex),right:Math.max(e.dragStartObject.columnIndex,n.columnIndex)},-1===e.dragStartObject.columnIndex&&(o.left=-1,o.right=a.length-1,o.top=Math.min(l.top,n.rowIndex),o.bottom=Math.max(l.bottom,n.rowIndex)),e.dragStartObject.rowIndex===n.rowIndex&&e.dragStartObject.columnIndex===n.columnIndex||(e.ignoreNextClick=!0),(e.cellBoundaryCrossed||0===i.x&&0===i.y||e.attributes.rowSelectionMode)&&(e.attributes.rowSelectionMode||-1===e.dragStartObject.columnIndex?e.selectRow(n.rowIndex,s,!0):!e.dragAddToSelection&&n.rowIndex?e.selections[n.rowIndex]&&-1!==e.selections[n.rowIndex].indexOf(n.columnIndex)&&e.selections[n.rowIndex].splice(e.selections[n.rowIndex].indexOf(n.columnIndex),1):(e.selections[n.rowIndex]=e.selections[n.rowIndex]||[],-1===e.selections[n.rowIndex].indexOf(n.columnIndex)&&e.selections[n.rowIndex].push(n.columnIndex))),!(e.selectionBounds&&o.top===e.selectionBounds.top&&o.left===e.selectionBounds.left&&o.bottom===e.selectionBounds.bottom&&o.right===e.selectionBounds.right||s))if(e.selections=[],l=o,e.attributes.rowSelectionMode)for(r=l.top;r<=l.bottom;r+=1)e.selectRow(r,!0,!0);else e.selectArea(l,!0);e.autoScrollZone(t,d,c,s)}e.cellBoundaryCrossed=!1,e.draw(!0)}}},e.endEdit=function(t){function r(){t=!0}var o=e.input.editCell,l=o.rowIndex;if(e.dispatchEvent("beforeendedit",[{},o,e.input.value,o.value,r,e.input],e.intf))return!1;if(e.input.value!==o.value&&!t){if(e.changes[l]=e.changes[l]||{},e.changes[l][o.header.name]=e.input.value,o.data[o.header.name]=e.input.value,l===e.data.length){if(e.dispatchEvent("newrow",[e.input.value,o.value,t,o,e.input],e.intf))return!1;e.uId+=1,e.addRow(o.data),e.createNewRowData()}e.draw(!0)}return document.body.removeChild(e.input),e.controlInput.focus(),e.dispatchEvent("endedit",[{},o,e.input.value,t,e.input],e.intf),e.input=void 0,!0},e.beginEditAt=function(t,r){function o(){var o=e.position(e.parentNode,!0);i=e.visibleCells.filter(function(e){return e.columnIndex===t&&e.rowIndex===r})[0],l=i.y+e.style.cellBorderWidth,n=i.x+e.style.cellBorderWidth,e.scrollEdit={scrollTop:e.scrollBox.scrollTop,scrollLeft:e.scrollBox.scrollLeft,inputTop:l,inputLeft:n},e.input=document.createElement(e.attributes.multiLine?"textarea":"input"),document.body.appendChild(e.input),e.input.className="canvas-datagrid-edit-input",e.input.style.position="absolute",e.input.style.top=o.top-1+l+"px",e.input.style.left=o.left-1+n+"px",e.input.style.height=i.height-2*e.style.cellBorderWidth+"px",e.input.style.width=i.width-2*e.style.cellBorderWidth-e.style.cellPaddingLeft+"px",e.input.style.zIndex="2",e.input.value=i.value,e.input.editCell=i,e.clipElement(e.input),e.input.focus(),e.input.addEventListener("click",e.stopPropagation),e.input.addEventListener("dblclick",e.stopPropagation),e.input.addEventListener("mouseup",e.stopPropagation),e.input.addEventListener("mousedown",e.stopPropagation),e.input.addEventListener("keydown",function(t){var r=i.columnIndex,o=i.rowIndex;if(27===t.keyCode)e.endEdit(!0),e.draw(!0);else if(13===t.keyCode)e.endEdit(),e.draw(!0);else if(9===t.keyCode){if(t.preventDefault(),!e.endEdit())return;t.shiftKey?r-=1:r+=1,r<0&&(r=s.length-1,o-=1),r>s.length-1&&(r=0,o+=1),o<0&&(o=e.data.length-1),o>e.data.length-1&&(o=0),e.beginEditAt(r,o)}})}if(e.attributes.editable){var l,n,i,s=e.getVisibleSchema();if(i=e.visibleCells.filter(function(e){return e.columnIndex===t&&e.rowIndex===r})[0],e.dispatchEvent("beforebeginedit",[{},i],e.intf))return!1;e.scrollIntoView(t,r),e.setActiveCell(t,r),requestAnimationFrame(o),e.dispatchEvent("beginedit",[i,e.input],e.intf)}},e.click=function(t){function r(){l&&e.dispatchEvent("selectionchanged",[e.getSelectedData(),e.selections,e.selectionBounds],e.intf)}var o,l,n=t.controlKey||t.metaKey||e.attributes.persistantSelectionMode,i=e.getLayerPos(t);if(e.currentCell=e.getCellAt(i.x,i.y),void 0===e.currentCell.grid){if(e.input&&e.endEdit(),e.ignoreNextClick)return void(e.ignoreNextClick=!1);if(o=e.currentCell,!e.dispatchEvent("click",[t,e.currentCell],e.intf)&&e.hasFocus){if("cell"===e.currentCell.context){if("cornerCell"===e.currentCell.style)return e.order(e.uniqueId,"asc"),e.setFilter(),void r();if("headerCell"===e.currentCell.style)return e.orderBy===o.header.name?e.orderDirection="asc"===e.orderDirection?"desc":"asc":e.orderDirection="asc",e.order(o.header.name,e.orderDirection),void r();if(-1!==["rowHeaderCell","headerCell"].indexOf(e.currentCell.style)||n||e.setActiveCell(o.columnIndex,o.rowIndex),e.selections[o.rowIndex]=e.selections[o.rowIndex]||[],e.attributes.rowSelectionMode||"rowHeaderCell"===e.currentCell.style){if("rowHeaderCell"===e.currentCell.style&&e.attributes.tree&&i.x>0&&i.x-e.currentCell.x<e.style.treeArrowWidth+e.style.treeArrowMarginLeft+e.style.treeArrowMarginRight+e.style.treeArrowClickRadius&&i.y-e.currentCell.y<e.style.treeArrowHeight+e.style.treeArrowMarginTop+e.style.treeArrowClickRadius&&i.y>0)return void e.toggleTree(o.rowIndex);l=!0,e.selectRow(o.rowIndex,n,!0)}t.shiftKey&&!n&&(e.selectionBounds=e.getSelectionBounds(),e.selectArea(void 0,!1))}r(),e.draw(!0)}}},e.dragResizeColumn=function(t){var r,o,l;return r=e.getLayerPos(t),o=e.resizingStartingWidth+r.x-e.dragStart.x,l=e.resizingStartingHeight+r.y-e.dragStart.y,o<e.style.minColumnWidth&&(o=e.style.minColumnWidth),l<e.style.minRowHeight&&(l=e.style.minRowHeight),!e.dispatchEvent("resizecolumn",[{},o,l,e.draggingItem],e.intf)&&(e.scrollBox.scrollLeft>e.scrollBox.scrollWidth-e.attributes.resizeScrollZone&&"ew-resize"===e.dragMode&&(e.resize(!0),e.scrollBox.scrollLeft+=o),"ew-resize"===e.dragMode?(e.sizes.columns["rowHeaderCell"===e.draggingItem.header.style?"cornerCell":e.draggingItem.header[e.uniqueId]]=o,-1!==["rowHeaderCell","cornerCell"].indexOf(e.draggingItem.header.style)&&e.resize(!0),void e.resizeChildGrids()):"ns-resize"===e.dragMode?(e.draggingItem.rowOpen?e.sizes.trees[e.draggingItem.data[e.uniqueId]]=l:e.attributes.globalRowResize?e.style.cellHeight=l:e.sizes.rows[e.draggingItem.data[e.uniqueId]]=l,e.dispatchEvent("resizerow",[l],e.intf),void e.resizeChildGrids()):void(e.ellipsisCache={}))},e.stopDragResize=function(){e.resize(),document.body.removeEventListener("mousemove",e.dragResizeColumn,!1),document.body.removeEventListener("mouseup",e.stopDragResize,!1),e.setStorageData(),e.draw(!0),e.ignoreNextClick=!0},e.scrollGrid=function(t){var r=e.getLayerPos(t);return e.scrollMode=e.getCellAt(r.x,r.y).context,"horizontal-scroll-box"===e.scrollMode&&"horizontal-scroll-box"!==e.scrollStartMode?(e.scrollStartMode="horizontal-scroll-box",e.dragStart=r,e.scrollStart.left=e.scrollBox.scrollLeft,void clearTimeout(e.scrollTimer)):"vertical-scroll-box"===e.scrollMode&&"vertical-scroll-box"!==e.scrollStartMode?(e.scrollStartMode="vertical-scroll-box",e.dragStart=r,e.scrollStart.top=e.scrollBox.scrollTop,void clearTimeout(e.scrollTimer)):("vertical-scroll-box"===e.scrollStartMode&&"vertical-scroll-box"!==e.scrollMode&&(e.scrollMode="vertical-scroll-box"),"horizontal-scroll-box"===e.scrollStartMode&&"horizontal-scroll-box"!==e.scrollMode&&(e.scrollMode="horizontal-scroll-box"),clearTimeout(e.scrollTimer),void(-1!==e.scrollModes.indexOf(e.scrollMode)&&("vertical-scroll-box"===e.scrollMode?e.scrollBox.scrollTop=e.scrollStart.top+(r.y-e.dragStart.y)/e.scrollBox.heightBoxRatio:"vertical-scroll-top"===e.scrollMode?(e.scrollBox.scrollTop-=e.page*e.style.cellHeight,e.scrollTimer=setTimeout(e.scrollGrid,e.attributes.scrollRepeatRate,t)):"vertical-scroll-bottom"===e.scrollMode&&(e.scrollBox.scrollTop+=e.page*e.style.cellHeight,e.scrollTimer=setTimeout(e.scrollGrid,e.attributes.scrollRepeatRate,t)),"horizontal-scroll-box"===e.scrollMode?e.scrollBox.scrollLeft=e.scrollStart.left+(r.x-e.dragStart.x)/e.scrollBox.widthBoxRatio:"horizontal-scroll-right"===e.scrollMode?(e.scrollBox.scrollLeft+=e.attributes.selectionScrollIncrement,e.scrollTimer=setTimeout(e.scrollGrid,e.attributes.scrollRepeatRate,t)):"horizontal-scroll-left"===e.scrollMode&&(e.scrollBox.scrollLeft-=e.attributes.selectionScrollIncrement,e.scrollTimer=setTimeout(e.scrollGrid,e.attributes.scrollRepeatRate,t)))))},e.stopScrollGrid=function(){clearTimeout(e.scrollTimer),document.body.removeEventListener("mousemove",e.scrollGrid,!1)},e.dragReorder=function(t){var r,o,l;r=e.getLayerPos(t),o=r.x-e.dragStart.x,l=r.y-e.dragStart.y,(e.attributes.allowColumnReordering||"column-reorder"!==e.dragMode)&&(e.attributes.allowRowReordering||"row-reorder"!==e.dragMode)&&(e.dispatchEvent("reordering",[t,e.dragStartObject,e.currentCell,e.dragMode],e.intf)||(Math.abs(o)>e.attributes.reorderDeadZone||Math.abs(l)>e.attributes.reorderDeadZone)&&(e.reorderObject=e.dragStartObject,e.reorderTarget=e.currentCell,e.reorderObject.dragOffset={x:o,y:l},e.autoScrollZone(t,r.x,r.x,!1)))},e.stopDragReorder=function(t){var r={"row-reorder":e.orders.rows,"column-reorder":e.orders.columns},o={"row-reorder":"rowIndex","column-reorder":"columnIndex"}[e.dragMode];document.body.removeEventListener("mousemove",e.dragReorder,!1),document.body.removeEventListener("mouseup",e.stopDragReorder,!1),e.reorderObject&&e.reorderTarget&&(e.ignoreNextClick=!0,e.reorderObject[o]===e.reorderTarget[o]||e.dispatchEvent("reorder",[t,e.reorderObject,e.reorderTarget,e.dragMode],e.intf)||(r[e.dragMode].splice(r[e.dragMode].indexOf(e.reorderObject[o]),1),r[e.dragMode].splice(r[e.dragMode].indexOf(e.reorderTarget[o]),0,e.reorderObject[o]),e.setStorageData())),e.reorderObject=void 0,e.reorderTarget=void 0,e.draw(!0)},e.mousedown=function(t){if(!e.dispatchEvent("mousedown",[t,e.currentCell],e.intf)&&e.hasFocus&&2!==t.button&&!e.input){var r=t.controlKey||t.metaKey;if(e.dragStart=e.getLayerPos(t),e.scrollStart={left:e.scrollBox.scrollLeft,top:e.scrollBox.scrollTop},e.dragStartObject=e.getCellAt(e.dragStart.x,e.dragStart.y),e.dragAddToSelection=!e.dragStartObject.selected,r||t.shiftKey||/(vertical|horizontal)-scroll-(bar|box)/.test(e.dragStartObject.context)||(e.selections=[]),!e.dragStartObject.isGrid){if(-1!==e.scrollModes.indexOf(e.dragStartObject.context))return e.scrollMode=e.dragStartObject.context,e.scrollStartMode=e.dragStartObject.context,e.scrollGrid(t),document.body.addEventListener("mousemove",e.scrollGrid,!1),document.body.addEventListener("mouseup",e.stopScrollGrid,!1),void(e.ignoreNextClick=!0);if("cell"===e.dragMode)return e.selecting=!0,e.attributes.rowSelectionMode&&e.selectRow(e.dragStartObject.rowIndex,r,!0),e.mousemove(t);-1!==["ns-resize","ew-resize"].indexOf(e.dragMode)&&(e.draggingItem=e.dragItem,e.draggingItem.rowOpen?e.resizingStartingHeight=e.sizes.trees[e.draggingItem.data[e.uniqueId]]:e.resizingStartingHeight=e.sizes.rows[e.draggingItem.data[e.uniqueId]]||e.style.cellHeight,e.resizingStartingWidth=e.sizes.columns["rowHeaderCell"===e.draggingItem.header.style?"cornerCell":e.draggingItem.header[e.uniqueId]]||e.draggingItem.header.width,document.body.addEventListener("mousemove",e.dragResizeColumn,!1),document.body.addEventListener("mouseup",e.stopDragResize,!1)),-1!==["row-reorder","column-reorder"].indexOf(e.dragMode)&&(e.draggingItem=e.dragItem,document.body.addEventListener("mousemove",e.dragReorder,!1),document.body.addEventListener("mouseup",e.stopDragReorder,!1))}}},e.mouseup=function(t){clearTimeout(e.scrollTimer),e.cellBoundaryCrossed=!0,e.dispatchEvent("mouseup",[t,e.currentCell],e.intf),e.hasFocus&&(e.currentCell&&void 0!==e.currentCell.grid||e.ontextMenu||e.input||(e.selecting=void 0,e.draggingItem=void 0,e.dragStart&&e.isInGrid(e.dragStart)&&e.controlInput.focus(),e.dragStartObject=void 0,t.preventDefault()))},e.keydown=function(t){var r,o=e.activeCell.columnIndex,l=e.activeCell.rowIndex,n=t.controlKey||t.metaKey,i=e.data.length-1,s=e.getVisibleSchema().length-1;if(!e.dispatchEvent("keydown",[t,e.currentCell],e.intf)&&e.hasFocus){if(e.page=e.visibleRows.length-3-e.attributes.pageUpDownOverlap,e.attributes.showNewRow&&(i+=1),"Tab"===t.keyCode&&t.preventDefault(),40===t.keyCode?l+=1:38===t.keyCode?l-=1:37===t.keyCode||t.shiftKey&&9===t.keyCode?o-=1:39===t.keyCode||!t.shiftKey&&9===t.keyCode?o+=1:33===t.keyCode?(l-=e.page,t.preventDefault()):34===t.keyCode?(l+=e.page,t.preventDefault()):36===t.keyCode||n&&38===t.keyCode?l=0:35===t.keyCode||n&&40===t.keyCode?l=e.data.length-1:n&&39===t.keyCode?o=s:n&&37===t.keyCode&&(o=0),13===t.keyCode)return e.beginEditAt(o,l);if(32===t.keyCode){if(e.selections=[],e.selections[Math.max(l,0)]=[],e.selections[Math.max(l,0)].push(o),e.selectionBounds=e.getSelectionBounds(),e.attributes.rowSelectionMode)for(r=e.selectionBounds.top;r<=e.selectionBounds.bottom;r+=1)e.selectRow(r,n,!0);else e.selectArea(void 0,n);return t.preventDefault(),void e.draw(!0)}o<0&&(o=0),l>i&&(l=i),l<0&&(l=0),o>s&&(o=s),t.shiftKey&&-1!==[37,38,39,40].indexOf(t.keyCode)&&(e.selections[Math.max(l,0)]=e.selections[Math.max(l,0)]||[],e.selections[Math.max(l,0)].push(o),e.selectionBounds=e.getSelectionBounds(),e.selectArea(void 0,n),e.draw(!0)),o===e.activeCell.columnIndex&&l===e.activeCell.rowIndex||(e.scrollIntoView(o!==e.activeCell.columnIndex?o:void 0,l!==e.activeCell.rowIndex?l:void 0),e.setActiveCell(o,l),!t.shiftKey&&e.attributes.selectionFollowsActiveCell&&(n||(e.selections=[]),e.selections[l]=e.selections[l]||[],e.selections[l].push(o),e.dispatchEvent("selectionchanged",[e.getSelectedData(),e.selections,e.selectionBounds],e.intf)),e.draw(!0))}},e.keyup=function(t){e.dispatchEvent("keyup",[t,e.currentCell],e.intf)||e.hasFocus&&(e.controlInput.value="")},e.keypress=function(t){e.hasFocus&&e.dispatchEvent("keypress",[t,e.currentCell],e.intf)},e.dblclick=function(t){e.dispatchEvent("dblclick",[t,e.currentCell],e.intf)||e.hasFocus&&("ew-resize"===e.currentCell.context&&"headerCell"===e.currentCell.style?e.fitColumnToValues(e.currentCell.header.name):"ew-resize"===e.currentCell.context&&"cornerCell"===e.currentCell.style?e.autosize():-1!==["cell","activeCell"].indexOf(e.currentCell.style)&&e.beginEditAt(e.currentCell.columnIndex,e.currentCell.rowIndex))},e.scrollWheel=function(t){if(!e.dispatchEvent("mousewheel",[t,e.ctx],e.intf)){var r=e.scrollBox.scrollLeft,o=e.scrollBox.scrollTop;e.hasFocus&&(e.scrollBox.scrollTop-=t.wheelDeltaY,e.scrollBox.scrollLeft-=t.wheelDeltaX),o===e.scrollBox.scrollTop&&r===e.scrollBox.scrollLeft||t.preventDefault()}},e.copy=function(t){var r=[];e.getSelectedData().forEach(function(e){if(e){var t=[];Object.keys(e).forEach(function(r){t.push(e[r])}),t.join(","),r.push(t)}}),t.clipboardData.setData("text/plain",r.join("\n")),t.preventDefault()}}}.apply(t,o))&&(e.exports=l)},function(e,t,r){var o,l;o=[],void 0!==(l=function(){"use strict";return function(e){e.intf.blur=function(){e.hasFocus=!1},e.intf.focus=function(){e.hasFocus=!0,e.controlInput.focus()},Object.defineProperty(e.intf,"height",{get:function(){return e.parentNode.height},set:function(t){e.parentNode.height=t,e.resize(!0)}}),Object.defineProperty(e.intf,"width",{get:function(){return e.parentNode.width},set:function(t){e.parentNode.width=t,e.resize(!0)}}),Object.defineProperty(e.intf,"openChildren",{get:function(){return e.openChildren}}),Object.defineProperty(e.intf,"childGrids",{get:function(){return e.childGrids}}),Object.defineProperty(e.intf,"isChildGrid",{get:function(){return e.isChildGrid}}),Object.defineProperty(e.intf,"parentNode",{get:function(){return e.parentNode},set:function(t){e.parentNode=t}}),Object.defineProperty(e.intf,"offsetParent",{get:function(){return e.parentNode},set:function(t){e.parentNode=t}}),Object.defineProperty(e.intf,"offsetLeft",{get:function(){return e.parentNode.offsetLeft}}),Object.defineProperty(e.intf,"offsetTop",{get:function(){return e.parentNode.offsetTop}}),Object.defineProperty(e.intf,"scrollHeight",{get:function(){return e.scrollBox.scrollHeight}}),Object.defineProperty(e.intf,"scrollWidth",{get:function(){return e.scrollBox.scrollWidth}}),Object.defineProperty(e.intf,"scrollTop",{get:function(){return e.scrollBox.scrollTop},set:function(t){e.scrollBox.scrollTop=t}}),Object.defineProperty(e.intf,"scrollLeft",{get:function(){return e.scrollBox.scrollLeft},set:function(t){e.scrollBox.scrollLeft=t}}),Object.defineProperty(e.intf,"sizes",{get:function(){return e.sizes}}),Object.defineProperty(e.intf,"input",{get:function(){return e.input}}),Object.defineProperty(e.intf,"controlInput",{get:function(){return e.controlInput}}),Object.defineProperty(e.intf,"currentCell",{get:function(){return e.currentCell}}),Object.defineProperty(e.intf,"visibleCells",{get:function(){return e.visibleCells}}),Object.defineProperty(e.intf,"visibleRows",{get:function(){return e.visibleRows}}),Object.defineProperty(e.intf,"selections",{get:function(){return e.selections}}),Object.defineProperty(e.intf,"dragMode",{get:function(){return e.dragMode}}),Object.defineProperty(e.intf,"changes",{get:function(){return e.changes}}),e.intf.attributes={},e.intf.style={},e.intf.formatters=e.formatters,Object.defineProperty(e.intf,"selectionBounds",{get:function(){return e.getSelectionBounds()}}),Object.defineProperty(e.intf,"selectedRows",{get:function(){return e.getSelectedData(!0)}}),Object.defineProperty(e.intf,"selectedCells",{get:function(){return e.getSelectedData()}}),Object.defineProperty(e.intf,"visibleSchema",{get:function(){return e.getVisibleSchema().map(function(e){return e})}}),Object.defineProperty(e.intf,"schema",{get:function(){return e.getSchema()},set:function(t){if(!Array.isArray(t)||"object"!=typeof t[0])throw new Error("Schema must be an array of objects.");if(void 0===t[0].name)throw new Error("Expected schema to contain an object with at least a name property.");e.schema=t.map(function(t,r){return t.width=t.width||e.style.columnWidth,t[e.uniqueId]=e.getSchemaNameHash(t.name),t.filter=t.filter||e.filter(t.type),t.type=t.type||"string",t.index=r,t.columnIndex=r,t.rowIndex=-1,t}),e.tempSchema=void 0,e.createNewRowData(),e.createColumnOrders(),e.tryLoadStoredOrders(),e.resize(!0),e.dispatchEvent("schemachanged",[e.schema],e.intf)}}),Object.defineProperty(e.intf,"data",{get:function(){return e.data},set:function(t){if(!Array.isArray(t)||t.length>0&&"object"!=typeof t[0])throw new Error("Data must be an array of objects.");e.originalData=t.map(function(t){return t[e.uniqueId]=e.uId,e.uId+=1,t}),e.changes=[],e.data=e.originalData,!e.schema&&e.data.length>0&&(e.tempSchema=e.getSchemaFromData()),e.schema||0!==e.data.length||(e.tempSchema=[{name:""}],e.tempSchema[0][e.uniqueId]=e.getSchemaNameHash("")),e.tempSchema&&!e.schema&&(e.createColumnOrders(),e.tryLoadStoredOrders(),e.dispatchEvent("schemachanged",[e.tempSchema],e.intf)),e.createNewRowData(),e.attributes.autoResizeColumns&&e.data.length>0&&void 0===e.storedSettings&&e.autosize(),requestAnimationFrame(function(){e.fitColumnToValues("cornerCell")}),e.resize()||e.draw(!0),e.createRowOrders(),e.tryLoadStoredOrders(),e.dispatchEvent("datachanged",[e.data],e.intf)}})}}.apply(t,o))&&(e.exports=l)},function(e,t,r){var o,l;o=[],void 0!==(l=function(){"use strict";return function(e){e.contextmenu=function(t){if(e.hasFocus){if(e.contextMenu)return t.preventDefault(),e.disposeContextMenu();var r,o,l,n,i,s,a,d=t.preventDefault,c={};if(r=e.getLayerPos(t),o=e.getCellAt(r.x,r.y),void 0===o.grid){if(!o.header)return void t.preventDefault();s=e.columnFilters[o.header.name]||"",l=document.createElement("div"),n=document.createElement("div"),n.className="canvas-datagrid-context-menu-label",i=document.createElement("input"),n.innerHTML=e.attributes.filterOptionText+" "+o.header.name,l.appendChild(n),l.appendChild(i),e.contextMenu=document.createElement("div"),e.contextMenu.className="canvas-datagrid-context-menu",e.contextMenu.style.cursor="pointer",e.contextMenu.style.position="absolute",e.contextMenu.style.zIndex="3",i.value=s,a=[],e.attributes.showFilter&&(a.push({title:l}),Object.keys(e.columnFilters).length&&Object.keys(e.columnFilters).forEach(function(r){a.push({title:e.attributes.removeFilterOptionText.replace(/%s/g,r),click:function(){t.preventDefault(),e.setFilter(r,""),e.disposeContextMenu(),e.controlInput.focus()}})})),e.attributes.saveAppearance&&e.attributes.showClearSettingsOption&&(Object.keys(e.sizes.rows).length>0||Object.keys(e.sizes.columns).length>0)&&a.push({title:e.attributes.clearSettingsOptionText,click:function(t){t.preventDefault(),e.sizes.rows={},e.sizes.columns={},e.createRowOrders(),e.createColumnOrders(),e.storedSettings=void 0,e.dispatchEvent("resizecolumn",[e.style.columnWidth],e.intf),e.dispatchEvent("resizerow",[e.style.cellHeight],e.intf),e.setStorageData(),e.resize(!0),e.disposeContextMenu(),e.controlInput.focus()}}),e.attributes.allowSorting&&e.attributes.showOrderByOption&&(a.push({title:e.attributes.showOrderByOptionTextAsc.replace("%s",o.header.name),click:function(t){t.preventDefault(),e.order(o.header.name,"asc"),e.disposeContextMenu(),e.controlInput.focus()}}),a.push({title:e.attributes.showOrderByOptionTextDesc.replace("%s",o.header.name),click:function(t){t.preventDefault(),e.order(o.header.name,"desc"),e.disposeContextMenu(),e.controlInput.focus()}})),e.dispatchEvent("contextmenu",[t,o,a,e.contextMenu],e.intf)||a.length&&(a.forEach(function(t){var r=document.createElement("div");e.contextMenu.appendChild(r),"string"==typeof t.title?(r.className="canvas-datagrid-context-menu-item",r.innerHTML=t.title):r.appendChild(t.title),t.click&&r.addEventListener("click",function(r){t.click.apply(this,[r,o,e.disposeContextMenu]),r.preventDefault(),r.stopPropagation(),e.controlInput.focus()})}),i.addEventListener("dblclick",e.stopPropagation),i.addEventListener("click",e.stopPropagation),i.addEventListener("mousedown",e.stopPropagation),i.addEventListener("keyup",function(){e.setFilter(o.header.name,i.value),requestAnimationFrame(function(){i.classList.remove(e.invalidSearchExpClass),e.invalidFilterRegEx&&i.classList.add(e.invalidSearchExpClass)})}),document.body.addEventListener("click",e.disposeContextMenu),document.body.appendChild(e.contextMenu),c.x=t.clientX-e.style.contextMenuMarginLeft,c.y=t.clientY-e.style.contextMenuMarginTop,c.x+e.contextMenu.offsetWidth>document.documentElement.clientWidth&&(c.x=document.documentElement.clientWidth-e.contextMenu.offsetWidth),c.y+e.contextMenu.offsetHeight>document.documentElement.clientHeight&&(c.y=document.documentElement.clientHeight-e.contextMenu.offsetHeight),e.contextMenu.style.left=c.x+"px",e.contextMenu.style.top=c.y+"px",d.apply(t))}}},e.disposeContextMenu=function(t){function r(){e.contextMenu=void 0,e.canvas.cursor="pointer",document.body.removeEventListener("click",e.disposeContextMenu),document.body.removeEventListener("mouseup",r),document.body.removeEventListener("mousedown",r)}(!t||e.contextMenu&&e.contextMenu.parentNode&&!e.contextMenu.contains(t.target))&&(e.contextMenu.parentNode.removeChild(e.contextMenu),document.body.addEventListener("mouseup",r),document.body.addEventListener("mousedown",r))}}}.apply(t,o))&&(e.exports=l)},function(e,t,r){var o,l;o=[],void 0!==(l=function(){"use strict";return function(e){e.defaults={attributes:[["name",""],["tree",!1],["showNewRow",!1],["treeHorizontalScroll",!1],["saveAppearance",!0],["selectionFollowsActiveCell",!1],["multiLine",!1],["editable",!0],["allowColumnReordering",!0],["allowRowReordering",!1],["allowSorting",!0],["showFilter",!0],["globalRowResize",!1],["pageUpDownOverlap",1],["persistantSelectionMode",!1],["rowSelectionMode",!1],["autoResizeColumns",!1],["allowRowHeaderResize",!0],["allowColumnResize",!0],["allowRowResize",!0],["allowRowResizeFromCell",!1],["allowColumnResizeFromCell",!1],["showPerformance",!1],["debug",!1],["borderResizeZone",10],["showHeaders",!0],["showRowNumbers",!0],["showRowHeaders",!0],["scrollRepeatRate",75],["selectionScrollZone",20],["resizeScrollZone",20],["selectionScrollIncrement",20],["reorderDeadZone",3],["showClearSettingsOption",!0],["showOrderByOption",!0],["clearSettingsOptionText","Clear saved settings"],["showOrderByOptionTextAsc","Order by %s ascending"],["showOrderByOptionTextDesc","Order by %s descending"],["removeFilterOptionText","Remove filter on %s"],["filterOptionText","Filter"]],styles:[["scrollBarBackgroundColor","rgba(240, 240, 240, 1)"],["scrollBarBoxColor","rgba(192, 192, 192, 1)"],["scrollBarActiveColor","rgba(125, 125, 125, 1)"],["scrollBarBoxWidth",8],["scrollBarBoxMargin",2],["scrollBarBoxBorderRadius",3],["scrollBarBorderColor","rgba(202, 202, 202, 1)"],["scrollBarBorderWidth",.5],["scrollBarWidth",11],["scrollBarBoxMinSize",15],["scrollBarCornerBorderColor","rgba(202, 202, 202, 1)"],["scrollBarCornerBackground","rgba(240, 240, 240, 1)"],["treeArrowClickRadius",5],["treeGridHeight",250],["treeArrowHeight",8],["treeArrowWidth",13],["treeArrowColor","rgba(155, 155, 155, 1)"],["treeArrowBorderColor","rgba(195, 199, 202, 1)"],["treeArrowBorderWidth",1],["treeArrowMarginRight",5],["treeArrowMarginLeft",0],["treeArrowMarginTop",6],["filterTextPrefix","(filtered) "],["editCellFontSize","16px"],["editCellFontFamily","sans-serif"],["editCellPaddingLeft",4],["editCellBoxShadow","0 2px 5px rgba(0,0,0,0.4)"],["editCellBorder","solid 1px rgba(110, 168, 255, 1)"],["styleSheet",""],["contextMenuItemMargin","2px"],["contextMenuItemBorderRadius","3px"],["contextMenuLabelMargin","0 3px 0 0"],["contextMenuLabelDisplay","inline-block"],["contextMenuLabelMinWidth","75px"],["contextMenuLabelMaxWidth","700px"],["contextMenuHoverBackground","rgba(182, 205, 250, 1)"],["contextMenuColor","rgba(43, 48, 43, 1)"],["contextMenuHoverColor","rgba(43, 48, 153, 1)"],["contextMenuFontSize","16px"],["contextMenuFontFamily","sans-serif"],["contextMenuBackground","rgba(240, 240, 240, 1)"],["contextMenuBorder","solid 1px rgba(158, 163, 169, 1)"],["contextMenuPadding","2px"],["contextMenuBorderRadius","3px"],["contextMenuOpacity","0.98"],["contextMenuFilterInvalidExpresion","rgba(237, 155, 156, 1)"],["contextMenuMarginTop",0],["contextMenuMarginLeft",5],["autosizePadding",5],["autosizeHeaderCellPadding",8],["minHeight",24],["minRowHeight",24],["minColumnWidth",45],["columnWidth",250],["backgroundColor","rgba(240, 240, 240, 1)"],["headerOrderByArrowHeight",8],["headerOrderByArrowWidth",13],["headerOrderByArrowColor","rgba(155, 155, 155, 1)"],["headerOrderByArrowBorderColor","rgba(195, 199, 202, 1)"],["headerOrderByArrowBorderWidth",1],["headerOrderByArrowMarginRight",5],["headerOrderByArrowMarginLeft",0],["headerOrderByArrowMarginTop",6],["cellHeightWithChildGrid",150],["cellWidthWithChildGrid",250],["cellHeight",24],["cellFont","16px sans-serif"],["cellPaddingTop",5],["cellAutoResizePadding",13],["cellPaddingLeft",5],["cellPaddingRight",7],["cellAlignment","left"],["cellColor","rgba(0, 0, 0, 1)"],["cellBackgroundColor","rgba(255, 255, 255, 1)"],["cellHoverColor","rgba(0, 0, 0, 1)"],["cellHoverBackgroundColor","rgba(255, 255, 255, 1)"],["cellSelectedColor","rgba(0, 0, 0, 1)"],["cellSelectedBackgroundColor","rgba(236, 243, 255, 1)"],["cellBorderWidth",.25],["cellBorderColor","rgba(195, 199, 202, 1)"],["activeCellFont","16px sans-serif"],["activeCellPaddingTop",5],["activeCellPaddingLeft",5],["activeCellPaddingRight",7],["activeCellAlignment","left"],["activeCellColor","rgba(0, 0, 0, 1)"],["activeCellBackgroundColor","rgba(255, 255, 255, 1)"],["activeCellHoverColor","rgba(0, 0, 0, 1)"],["activeCellHoverBackgroundColor","rgba(255, 255, 255, 1)"],["activeCellSelectedColor","rgba(0, 0, 0, 1)"],["activeCellSelectedBackgroundColor","rgba(236, 243, 255, 1)"],["activeCellBorderWidth",.25],["activeCellBorderColor","rgba(110, 168, 255, 1)"],["headerCellPaddingTop",5],["headerCellPaddingLeft",5],["headerCellPaddingRight",7],["headerCellHeight",25],["headerCellBorderWidth",.25],["headerCellBorderColor","rgba(152, 152, 152, 1)"],["headerCellFont","16px sans-serif"],["headerCellColor","rgba(50, 50, 50, 1)"],["headerCellBackgroundColor","rgba(240, 240, 240, 1)"],["headerCellHoverColor","rgba(0, 0, 0, 1)"],["headerCellHoverBackgroundColor","rgba(235, 235, 235, 1)"],["headerCellActiveColor","rgba(0, 0, 0, 1)"],["headerCellActiveBackgroundColor","rgba(225, 225, 225, 1)"],["headerRowWidth",57],["rowHeaderCellPaddingTop",5],["rowHeaderCellPaddingLeft",5],["rowHeaderCellPaddingRight",5],["rowHeaderCellHeight",25],["rowHeaderCellBorderWidth",.25],["rowHeaderCellBorderColor","rgba(152, 152, 152, 1)"],["rowHeaderCellFont","16px sans-serif"],["rowHeaderCellColor","rgba(50, 50, 50, 1)"],["rowHeaderCellBackgroundColor","rgba(240, 240, 240, 1)"],["rowHeaderCellHoverColor","rgba(0, 0, 0, 1)"],["rowHeaderCellHoverBackgroundColor","rgba(235, 235, 235, 1)"],["rowHeaderCellSelectedColor","rgba(50, 50, 50, 1)"],["rowHeaderCellSelectedBackgroundColor","rgba(217, 217, 217, 1)"],["rowHeaderCellActiveColor","rgba(0, 0, 0, 1)"],["rowHeaderCellActiveBackgroundColor","rgba(225, 225, 225, 1)"],["activeCellOverlayBorderColor","rgba(66, 133, 244, 1)"],["activeCellOverlayBorderWidth",2],["selectionOverlayBorderColor","rgba(66, 133, 244, 1)"],["selectionOverlayBorderWidth",1.25],["reorderMarkerIndexBorderColor","rgba(66, 133, 244, 1)"],["reorderMarkerIndexBorderWidth",2.75],["reorderMarkerBackgroundColor","rgba(0, 0, 0, 0.1)"],["reorderMarkerBorderColor","rgba(0, 0, 0, 0.2)"],["reorderMarkerBorderWidth",1.25],["gridBorderColor","rgba(202, 202, 202, 1)"],["gridBorderWidth",1]]}}}.apply(t,o))&&(e.exports=l)},function(e,t,r){var o,l;o=[],void 0!==(l=function(){"use strict";return function(e){e.attachCss=function(){var t,r=[],o={"canvas-datagrid-canvas":{position:"absolute!important","z-index":"-1"},"canvas-datagrid-scrollBox":{position:"absolute!important",overflow:"auto!important","z-index":"1!important"},"canvas-datagrid":{position:"absolute!important",background:e.style.backgroundColor,"z-index":"1","box-sizing":"content-box!important",padding:"0!important"},"canvas-datagrid-control-input":{position:"fixed!important",top:"-5px",left:"-5px",border:"none!important",opacity:"0!important",cursor:"pointer!important",width:"1px",height:"1px"},"canvas-datagrid-edit-input":{"box-sizing":"content-box!important",outline:"none!important",margin:"0!important",padding:"0 0 0 "+e.style.editCellPaddingLeft+"px!important","font-size":e.style.editCellFontSize+"!important","font-family":e.style.editCellFontFamily+"!important","box-shadow":e.style.editCellBoxShadow,border:e.style.editCellBorder},"canvas-datagrid-context-menu-item":{margin:e.style.contextMenuItemMargin,"border-radius":e.style.contextMenuItemBorderRadius},"canvas-datagrid-context-menu-item:hover":{background:e.style.contextMenuHoverBackground,color:e.style.contextMenuHoverColor,margin:e.style.contextMenuItemMargin},"canvas-datagrid-context-menu-label":{margin:e.style.contextMenuLabelMargin,display:e.style.contextMenuLabelDisplay,"min-width":e.style.contextMenuLabelMinWidth,"max-width":e.style.contextMenuLabelMaxWidth},"canvas-datagrid-context-menu":{"font-family":e.style.contextMenuFontFamily,"font-size":e.style.contextMenuFontSize,background:e.style.contextMenuBackground,color:e.style.contextMenuColor,border:e.style.contextMenuBorder,padding:e.style.contextMenuPadding,"border-radius":e.style.contextMenuBorderRadius,opacity:e.style.contextMenuOpacity},"canvas-datagrid-invalid-search-regExp":{background:e.style.contextMenuFilterInvalidExpresion}};Object.keys(o).forEach(function(e){r.push("."+e+"{"),Object.keys(o[e]).forEach(function(t){r.push(t+":"+o[e][t]+";")}),r.push("}")}),document.getElementById(e.uniqueId)||(t=document.createElement("link"),t.id=e.uniqueId,t.rel="stylesheet",document.head.firstChild?document.head.insertBefore(t,document.head.firstChild):document.head.appendChild(t),t.href="data:text/css;base64,"+btoa(e.style.styleSheet||r.join("")))},e.appendTo=function(t){e.parentNode=t,e.height=e.parentNode.offsetHeight,e.width=e.parentNode.offsetWidth,e.parentNode&&/canvas-datagrid-(cell|tree)/.test(e.parentNode.nodeType)?(e.isChildGrid=!0,e.parentGrid=e.parentNode.parentGrid,e.ctx=e.parentGrid.context,e.canvas=e.parentGrid.canvas,e.controlInput=e.parentGrid.controlInput,e.eventParent=e.canvas,e.intf.offsetParent=e.parentNode):(e.controlInput=document.createElement("input"),e.controlInput.className="canvas-datagrid-control-input",e.isChildGrid=!1,e.parentDOMNode=e.parentNode,e.parentNode=e.parentDOMNode,e.canvas=document.createElement("canvas"),e.ctx=e.canvas.getContext("2d"),e.ctx.textBaseline="alphabetic",e.parentDOMNode.appendChild(e.canvas),e.parentDOMNode.appendChild(e.controlInput),e.eventParent=e.canvas),window.addEventListener("resize",e.resize),MutationObserver&&(e.observer=new MutationObserver(function(t){t.forEach(function(t){e.resize(!0)})}),[e.canvas.parentNode].forEach(function(t){e.observer.observe(t,{attributes:!0})})),e.eventParent.addEventListener("mouseup",e.mouseup,!1),e.eventParent.addEventListener("mousedown",e.mousedown,!1),e.eventParent.addEventListener("dblclick",e.dblclick,!1),e.eventParent.addEventListener("click",e.click,!1),e.eventParent.addEventListener("mousemove",e.mousemove),e.eventParent.addEventListener("mousewheel",e.scrollWheel,!1),e.canvas.addEventListener("contextmenu",e.contextmenu,!1),e.canvas.addEventListener("copy",e.copy),e.controlInput.addEventListener("keypress",e.keypress,!1),e.controlInput.addEventListener("keyup",e.keyup,!1),e.controlInput.addEventListener("keydown",e.keydown,!1)},e.setDom=function(){e.appendTo(e.args.parentNode),e.attachCss()},e.initScrollBox=function(){var t=0,r=0,o=0,l=0,n=0,i=0,s=20,a=20;Object.defineProperty(e.scrollBox,"scrollBoxHeight",{get:function(){return s},set:function(e){s=e}}),Object.defineProperty(e.scrollBox,"scrollBoxWidth",{get:function(){return a},set:function(e){a=e}}),Object.defineProperty(e.scrollBox,"height",{get:function(){return t},set:function(e){n<e&&(o=0),t=e}}),Object.defineProperty(e.scrollBox,"width",{get:function(){return r},set:function(e){r=e}}),Object.defineProperty(e.scrollBox,"scrollTop",{get:function(){return o},set:function(t){t<0&&(t=0),t>n&&(t=n),n<0&&(t=0),o=t,e.scroll()}}),Object.defineProperty(e.scrollBox,"scrollLeft",{get:function(){return l},set:function(t){t<0&&(t=0),t>i&&(t=i),i<0&&(t=0),l=t,e.scroll()}}),Object.defineProperty(e.scrollBox,"scrollHeight",{get:function(){return n},set:function(e){o>e&&(o=Math.max(e,0)),n<t&&(o=0),n=e}}),Object.defineProperty(e.scrollBox,"scrollWidth",{get:function(){return i},set:function(e){l>e&&(l=Math.max(e,0)),i=e}})}}}.apply(t,o))&&(e.exports=l)},function(e,t,r){var o,l;o=[],void 0!==(l=function(){"use strict";return function(e){e.insertColumn=function(t,r){var o=e.getSchema();if(o.length<r)throw new Error("Index is beyond the length of the schema.");e.validateColumn(t,o),e.intf.schema=o.splice(r,0,t)},e.deleteColumn=function(t){var r=e.getSchema();e.intf.schema=r.splice(t,1)},e.addColumn=function(t){var r=e.getSchema();e.validateColumn(t,r),r.push(t),e.intf.schema=r},e.deleteRow=function(t){e.originalData.splice(t,1),e.setFilter(),e.resize(!0)},e.insertRow=function(t,r){if(e.originalData.length<r)throw new Error("Index is beyond the length of the dataset.");e.originalData.splice(r,0,t),e.setFilter(),e.resize(!0)},e.addRow=function(t){e.originalData.push(t),e.setFilter(),e.resize(!0)},e.setRowHeight=function(t,r){e.sizes.rows[e.data[t][e.uniqueId]]=r,e.draw(!0)},e.setColumnWidth=function(t,r){var o=e.getSchema();e.sizes.columns[o[t][e.uniqueId]]=r,e.draw(!0)},e.resetColumnWidths=function(){e.sizes.columns={},e.draw(!0)},e.resetRowHeights=function(){e.sizes.rows={},e.draw(!0)},e.setFilter=function(t,r){function o(){e.refreshFromOrigialData(),Object.keys(e.columnFilters).forEach(function(r){var o=e.getHeaderByName(t);o&&(e.currentFilter=o.filter,e.data=e.data.filter(function(t){return e.currentFilter(t[r],e.columnFilters[r])}))}),e.resize(),e.draw(!0)}if(void 0===e.coulumn&&void 0===r)return o();!t||""!==r&&void 0!==r?e.columnFilters[t]=r:delete e.columnFilters[t],o()},e.findRowScrollTop=function(t){var r=0,o=0,l=e.data.length,n=2*e.style.cellBorderWidth;if(e.attributes.showNewRow||(l-=1),t>l)throw new Error("Impossible row index");for(;o<t;)r+=(e.sizes.rows[e.data[o][e.uniqueId]]||e.style.cellHeight)+n,o+=1;return r-(e.sizes.rows[e.data[t][e.uniqueId]]||e.style.cellHeight)},e.findColumnScrollLeft=function(t){var r=0,o=0,l=e.getSchema();if(t>l.length-1)throw new Error("Impossible column index");for(;o<t;)r+=e.sizes.columns[l[o][e.uniqueId]]||l[o].width,o+=1;return r},e.gotoCell=function(t,r){void 0!==t&&(e.scrollBox.scrollLeft=e.findColumnScrollLeft(t)),void 0!==r&&(e.scrollBox.scrollTop=e.findRowScrollTop(r))},e.gotoRow=function(t){e.gotoCell(0,t)},e.scrollIntoView=function(t,r){0===e.visibleCells.filter(function(o){return(o.rowIndex===r||void 0===r)&&(o.columnIndex===t||void 0===t)&&o.x>0&&o.y>0&&o.x+o.width<e.width&&o.y+o.height<e.height}).length&&e.gotoCell(t,r)},e.setActiveCell=function(t,r){e.activeCell={rowIndex:r,columnIndex:t}},e.selectRow=function(t,r,o){var l=e.getSchema();if(!1===e.dragAddToSelection&&e.selections[t]&&e.selections[t].length-1===l.length&&r)return void(e.selections[t]=[]);!0===e.dragAddToSelection&&(e.selections[t]=[],e.selections[t].push(-1),l.forEach(function(r){e.selections[t].push(r.index)})),o||e.dispatchEvent("selectionchanged",[e.getSelectedData(),e.selections,e.selectionBounds],e.intf)},e.collapseTree=function(t){var r=e.data[t][e.uniqueId];e.dispatchEvent("collapsetree",[e.childGrids[r],e.data[t],t],e.intf),e.openChildren[r].blur(),e.openChildren[r].dispose(),delete e.openChildren[r],delete e.sizes.trees[r],delete e.childGrids[r],e.dispatchEvent("resizerow",[e.style.cellHeight],e.intf),e.resize(!0),e.draw(!0)},e.expandTree=function(t){var r,o=e.getHeaderCellHeight(),l=e.sizes.columns.cornerCell||e.style.headerRowWidth,n=e.data[t][e.uniqueId],i=e.sizes.trees[n]||e.style.treeGridHeight;e.childGrids[n]||(r=grid({debug:e.attributes.debug,showPerformance:e.attributes.showPerformance,name:e.attributes.saveAppearance?e.attributes.name+"tree"+n:void 0,parentNode:{parentGrid:e.intf,nodeType:"canvas-datagrid-tree",offsetHeight:i,offsetWidth:e.width-l,header:{width:e.width-l},offsetLeft:l,offsetTop:o,offsetParent:e.intf.parentNode,parentNode:e.intf.parentNode,style:"tree",data:e.data[t]}}),e.childGrids[n]=r),r=e.childGrids[n],r.visible=!0,e.dispatchEvent("expandtree",[r,e.data[t],t],e.intf),e.openChildren[e.data[t][e.uniqueId]]=r,e.sizes.trees[e.data[t][e.uniqueId]]=i,e.dispatchEvent("resizerow",[e.style.cellHeight],e.intf),e.resize(!0),e.draw()},e.toggleTree=function(t){if(e.openChildren[e.data[t][e.uniqueId]])return e.collapseTree(t);e.expandTree(t)},e.getHeaderByName=function(t){var r,o=e.getSchema();for(r=0;r<o.length;r+=1)if(o[r].name===t)return o[r]},e.fitColumnToValues=function(t){e.sizes.columns["cornerCell"===t?t:e.getHeaderByName(t)[e.uniqueId]]=e.findColumnMaxTextLength(t),e.resize(),e.draw(!0)},e.isCellVisible=function(t){var r,o=e.visibleCells.length;for(r=0;r<o;r+=1)if(t.x===e.visibleCells[r].x&&t.y===e.visibleCells[r].y)return!0;return!1},e.order=function(t,r,o){var l,n=e.getSchema().filter(function(e){return e.name===t});if(e.orderBy=t,0===n.length)throw new Error("Cannot sort.  No such column name");l=e.sorters[n[0].type],l||void 0===n[0].type||console.warn('Cannot sort type "%s" falling back to string sort.',n[0].type),e.data=e.data.sort("function"==typeof l?l(t,r):e.sorters.string),e.dispatchEvent("ordercolumn",[t,r],e.intf),e.draw(!0),o||e.setStorageData()},e.isInGrid=function(t){return!(t.x<0||t.x>e.width||t.y<0||t.y>e.height)},e.getCellAt=function(t,r){var o,l,n=e.visibleCells.length;if(e.visibleCells&&e.visibleCells.length){if(e.hasFocus=!0,!(r<e.height&&r>0&&t<e.width&&t>0))return e.hasFocus=!1,{dragContext:"inherit",context:"inherit"};for(o=0;o<n;o+=1)if(l=e.visibleCells[o],l.x-e.style.cellBorderWidth<t&&l.x+l.width+e.style.cellBorderWidth>t&&l.y-e.style.cellBorderWidth<r&&l.y+l.height+e.style.cellBorderWidth>r)return/vertical-scroll-(bar|box)/.test(l.style)?(l.dragContext="vertical-scroll-box",l.context="vertical-scroll-box",r>e.scrollBox.box.v.y+e.scrollBox.scrollBoxHeight?(l.dragContext="vertical-scroll-bottom",l.context="vertical-scroll-bottom"):r<e.scrollBox.box.v.y&&(l.dragContext="vertical-scroll-top",l.context="vertical-scroll-top"),e.canvas.style.cursor="default",l):/horizontal-scroll-(bar|box)/.test(l.style)?(l.dragContext="horizontal-scroll-box",l.context="horizontal-scroll-box",t>e.scrollBox.box.h.x+e.scrollBox.scrollBoxWidth?(l.dragContext="horizontal-scroll-right",l.context="horizontal-scroll-right"):t<e.scrollBox.box.h.x&&(l.dragContext="horizontal-scroll-left",l.context="horizontal-scroll-left"),e.canvas.style.cursor="default",l):l.x+l.width-.4*e.attributes.borderResizeZone<t&&l.x+l.width+.6*e.attributes.borderResizeZone>t&&e.attributes.allowColumnResize&&(e.attributes.allowColumnResizeFromCell&&"cell"===l.style||"cell"!==l.style)&&(e.attributes.allowRowHeaderResize&&-1!==["rowHeaderCell","cornerCell"].indexOf(l.style)||-1===["rowHeaderCell","cornerCell"].indexOf(l.style))?(l.context="ew-resize",l.dragContext="ew-resize",l):l.y+l.height-.4*e.attributes.borderResizeZone<r&&l.y+l.height+.6*e.attributes.borderResizeZone>r&&e.attributes.allowRowResize&&(e.attributes.allowRowResizeFromCell&&"cell"===l.style||"cell"!==l.style)&&"headerCell"!==l.style?(l.context="ns-resize",l.dragContext="ns-resize",l):"headerCell"===l.style?(l.context="cell",l.dragContext="column-reorder",l):"rowHeaderCell"===l.style?(l.context="cell",l.dragContext="row-reorder",l):l.isGrid?(e.hasFocus=!1,l.dragContext="cell-grid",l.context="cell-grid",l):"tree-grid"===l.style?(e.hasFocus=!1,l.dragContext="tree",l.context="tree",l):(l.dragContext="cell",l.context="cell",l);return e.hasFocus=!1,{context:"inherit"}}},e.getSelectionBounds=function(){var t={x:1/0,y:1/0},r={x:-1/0,y:-1/0};return e.data.forEach(function(o,l){var n,i;e.selections[l]&&e.selections[l].length&&(t.y=l<t.y?l:t.y,r.y=l>r.y?l:r.y,n=Math.max.apply(null,e.selections[l]),i=Math.min.apply(null,e.selections[l]),t.x=i<t.x?i:t.x,r.x=n>r.x?n:r.x)}),{top:t.y,left:t.x,bottom:r.y,right:r.x}},e.getSchemaFromData=function(){return Object.keys(e.data[0]||{" ":""}).map(function(t,r){var o=e.getBestGuessDataType(t),l={name:t,title:t,width:e.style.columnWidth,index:r,type:o,filter:e.filter(o)};return t===e.uniqueId&&(l.hidden=!0),l[e.uniqueId]=e.getSchemaNameHash(t),l})},e.clearChangeLog=function(){e.changes=[]},e.selectArea=function(t,r){e.selectionBounds=t||e.selectionBounds;var o,l,n=e.getSchema();if(r||(e.selections=[]),e.selectionBounds.top<-1||e.selectionBounds.bottom>e.data.length||e.selectionBounds.left<-1||e.selectionBounds.right>n.length)throw new Error("Impossible selection area");for(o=e.selectionBounds.top;o<=e.selectionBounds.bottom;o+=1)for(e.selections[o]=[],l=e.selectionBounds.left;l<=e.selectionBounds.right;l+=1)-1===e.selections[o].indexOf(l)&&e.selections[o].push(l);e.dispatchEvent("selectionchanged",[e.getSelectedData(),e.selections,e.selectionBounds],e.intf)},e.findColumnMaxTextLength=function(t){var r=-1/0;return"cornerCell"===t?(e.ctx.font=e.style.rowHeaderCellFont,e.ctx.measureText((e.data.length+(e.attributes.showNewRow?1:0)).toString()).width+e.style.autosizePadding+e.style.autosizeHeaderCellPadding+e.style.rowHeaderCellPaddingRight+e.style.rowHeaderCellPaddingLeft+(e.attributes.tree?e.style.treeArrowWidth+e.style.treeArrowMarginLeft+e.style.treeArrowMarginRight:0)):(e.getSchema().forEach(function(o){if(o.name===t){e.ctx.font=e.style.headerCellFont;var l=e.ctx.measureText(o.title||o.name).width+e.style.headerCellPaddingRight+e.style.headerCellPaddingLeft;r=l>r?l:r}}),e.data.forEach(function(o){e.ctx.font=e.style.cellFont;var l=e.ctx.measureText(o[t]).width+e.style.cellPaddingRight+e.style.cellPaddingLeft+e.style.cellAutoResizePadding;r=l>r?l:r}),r)},e.getHeaderWidth=function(){return e.getVisibleSchema().reduce(function(e,t){return e+t.width},0)},e.formatters.string=function(e,t){return void 0!==t.value?t.value:""},e.formatters.rowHeaderCell=e.formatters.string,e.formatters.headerCell=e.formatters.string,e.formatters.number=e.formatters.string,e.formatters.int=e.formatters.string,e.sorters.string=function(e,t){var r="asc"===t;return function(t,o){return void 0===t[e]||null===t[e]?1:void 0===o[e]||null===o[e]?0:r?t[e].localeCompare?t[e].localeCompare(o[e]):1:o[e].localeCompare?o[e].localeCompare(t[e]):1}},e.sorters.number=function(e,t){var r="asc"===t;return function(t,o){return r?t[e]-o[e]:o[e]-t[e]}},e.sorters.date=function(e,t){var r="asc"===t;return function(t,o){return r?new Date(t[e]).getTime()-new Date(o[e]).getTime():new Date(o[e]).getTime()-new Date(t[e]).getTime()}}}}.apply(t,o))&&(e.exports=l)}]);